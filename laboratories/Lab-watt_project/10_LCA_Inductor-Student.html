
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>10.10. Life Cycle Assessment of an inductor (student version) &#8212; Sizing and optimization of mechatronic systems</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- So that users can add custom icons -->
  <script src="../../_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../../_static/copybutton.js?v=f281be69"></script>
    <script src="../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'laboratories/Lab-watt_project/10_LCA_Inductor-Student';</script>
    <link rel="icon" href="../../_static/logo.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="10.11. Life Cycle Assessment of an inductor" href="10_LCA_Inductor.html" />
    <link rel="prev" title="10.9. Sizing code of a DC/DC converter" href="09_SizingCodeDCDCconverter.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../about/homepage.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../_static/logo.png" class="logo__image only-light" alt="Sizing and optimization of mechatronic systems - Home"/>
    <img src="../../_static/logo.png" class="logo__image only-dark pst-js-only" alt="Sizing and optimization of mechatronic systems - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">About</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../../about/context.html">Context</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/syllabus.html">Syllabus</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../about/installation.html">Installation guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Classes</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../classes/Lecture0/summary.html">1. Concept of Operations and architectures</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture0/1-concept_of_operations.html">1.1. Concept of Operations</a></li>



<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture0/2-system_architectures.html">1.5. System architectures</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture0/3-architectures_sizing.html">1.8. Preliminary design of mechatronic system</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../classes/Lecture1_new/summary.html">2. Components, technologies, design drivers and sizing scenarios</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture1_new/1-scenarios_and_design_drivers.html">2.1. Scenarios and Design Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture1_new/2-quiz_DesignDrivers.html">2.2. Quiz - Design drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture1_new/3-quiz_SizingScenarios.html">2.3. Quiz - Sizing scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture1_new/4-technologies.html">2.4. Components and Technologies for Mechatronic Systems</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../classes/Lecture2_new/summary.html">3. Estimation models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture2_new/1-linear_regressions.html">3.1. Linear regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture2_new/2-quiz_regressions.html">3.2. Quiz - Linear regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture2_new/3-scaling_laws.html">3.3. Scaling laws</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture2_new/4-quiz_scaling_laws.html">3.4. Quiz - Scaling Laws</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../classes/Lecture3_new/summary.html">4. Simulation and evaluation models</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture3_new/1-simulation_models.html">4.1. Simulation models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture3_new/2-quiz_simulation_models.html">4.2. Quiz - Simulation models</a></li>


<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture3_new/3-evaluation_models.html">4.5. Evaluation models</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture3_new/4-quiz_evaluation_models.html">4.6. Quiz - Evaluation models</a></li>

</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../classes/Lecture4_new/summary.html">5. Optimal sizing procedures</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture4_new/1-design_and_optimization_problems.html">5.1. Representation of a Design Problem and Fundamentals of Optimal Design</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture4_new/2-optimization_examples.html">5.2. Optimization with python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture4_new/3-sizing_procedures.html">5.3. Development of a sizing procedure using design graphs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../classes/Lecture4_new/4-sizing_procedure_examples.html">5.4. Design graph and optimization with python</a></li>
</ul>
</details></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Laboratories</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../Lab-vega/summary.html">6. VEGA Launcher TVC EMA</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/0-Case_study.html">6.2. Thrust Vector Control (TVC) Systems: Overview, Functions, and Technologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/1-estimation_models.html">6.3. Estimation models with scaling laws and linear regression</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/2-simulation_evaluation_models.html">6.4. Simulation and Evaluation models: endurance of the actuator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/3-SizingDesignExploration.html">6.5. Optimization of a motor/reducer set for a high dynamic application</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/4-sizing_scenarios_variable_anchorage.html">6.6. Modeling mechanical load for different actuator anchorage positions</a></li>

<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/5-sizing_and_optimization.html">6.8. Sizing procedure and optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-vega/6-sizing_and_optimization_with_mdao_using_om.html">6.9. Sizing procedure and optimization with OpenMDAO</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Lab-package_delivery_UAV/summary.html">7. Package delivery UAV</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/1-conops.html">7.1. Package Delivery UAV Concept of Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/1-conops-student.html">7.2. Package Delivery UAV Concept of Operations (Student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/2-system_architectures-student.html">7.3. System architectures of the Package Delivery UAV (Student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/2-system_architectures.html">7.4. System Architecture Selection for a Package Delivery UAV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/3-sizing_scenarios.html">7.5. Sizing scenarios and design drivers</a></li>

<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/3-sizing_scenarios-student.html">7.7. Sizing scenarios and design drivers (student version)</a></li>

<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/4-estimation_models-linear_regression.html">7.9. Estimation models with dimensional analysis and linear regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/4-estimation_models-linear_regression-student.html">7.10. Estimation models with dimensional analysis and linear regressions  (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/4-estimation_models-scaling_laws.html">7.11. Estimation models with scaling laws</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/4-estimation_models-scaling_laws-student.html">7.12. Scaling laws of electrical components (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/5-simulation_models-student.html">7.13. Simulation models (Student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6-sizing_models_introduction.html">7.14. Sizing models for multi-rotor definition</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6a-propeller_selection.html">7.15. Propeller selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6a-propeller_selection-student.html">7.16. Propeller selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6b-motor_selection.html">7.17. Motor selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6b-motor_selection-student.html">7.18. Motor selection  (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6c-battery_esc_selection.html">7.19. Battery and ESC selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6c-battery_esc_selection-student.html">7.20. Battery and ESC selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6d-frame_selection.html">7.21. Frame selection</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/6d-frame_selection-student.html">7.22. Frame selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/7-system_sizing_code_optimization.html">7.23. Sizing of a multirotor drone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/7-system_sizing_code_optimization-student.html">7.24. Sizing of a multirotor drone (ISAE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/8-design_exploration-student.html">7.25. Design optimization and exploration of a multirotor drone (ISAE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-package_delivery_UAV/A1-sizing_equations.html">7.26. Appendix 1: Sizing equations</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Lab-High_speed_multirotor/summary.html">8. High speed drone design</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/01_CaseStudy.html">8.2. Case study and architecture presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/02a_SizingScenarios-Student.html">8.3. Sizing scenarios and design drivers (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/02b_SizingScenariosEquations-Student.html">8.4. Equations of sizing scenarios (INSA)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/03a_PropellerLinearRegression-Student.html">8.5. Propellers estimation models with dimensional analysis and linear regressions  (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/03b_PropellerSelection-Student.html">8.6. Propeller selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/04a_ScalingLawsElectricalComponents-Student.html">8.7. Scaling laws of electrical components (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/04b_MotorSelection-Student.html">8.8. Motor selection  (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/04c_BatteryESCSelection-Student.html">8.9. Battery and ESC selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/05a_FrameSizing-Student.html">8.10. Frame selection (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/06_DesignExploration-Student.html">8.11. Design optimization and exploration of a multirotor drone (ISAE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/A1_Sizing_equations.html">8.12. Appendix 1: Sizing equations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/A2_SystemSizingCodeOptimization.html">8.13. Annex 2: Sizing of a multi-rotor drone</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Lab-High_speed_multirotor/A3_Example_PlotDrone.html">8.14. Appendix 3: Drone plot</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="summary-short.html">9. Lab - Sustainable mobility - Mission profile &amp; Specification</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="00_SustainableMobility.html">9.1. Sustainable mobilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="01a_CaseStudy.html">9.2. Case study presentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="01b_CaseStudy_Specification-Student.html">9.3. TP1 - Case study specification [Student Version]</a></li>
<li class="toctree-l2"><a class="reference internal" href="02b_Architecture_Hybrid-Student.html">9.4. TD1/2 - Hydrid storage architecture &amp; specification [Student version]</a></li>
</ul>
</details></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="summary.html">10. Lab - Sustainable mobility - DC/DC converter sizing</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="03_SizingScenarios-Student.html">10.1. TD3 - Equations of sizing scenarios [Student version]</a></li>
<li class="toctree-l2"><a class="reference internal" href="04_ScalingLaws-Student.html">10.2. IGBT estimation models with scaling laws [Student version]</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_HeatsinkLinearRegression-Student.html">10.3. Heatsink  estimation models with simple and multiple linear regressions (Student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="05_HeatsinkLinearRegression.html">10.4. Heatsink  estimation models with simple and multiple linear regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="06_SizingCodeInductor.html">10.5. Sizing code of an inductor</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_SizingCodeInductor-Surrogate-Student.html">10.6. Sizing code of an inductor with surrogate models (Student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="07_SizingCodeInductor-Surrogate.html">10.7. Sizing code of an inductor with surrogate models</a></li>
<li class="toctree-l2"><a class="reference internal" href="08_DCDC_converter_sizing_introduction.html">10.8. Design graphs for the sizing a DC/DC converter</a></li>
<li class="toctree-l2"><a class="reference internal" href="09_SizingCodeDCDCconverter.html">10.9. Sizing code of a DC/DC converter</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">10.10. Life Cycle Assessment of an inductor (student version)</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_LCA_Inductor.html">10.11. Life Cycle Assessment of an inductor</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/SizingLab/sizing_course/main?urlpath=lab/tree/laboratories/Lab-watt_project/10_LCA_Inductor-Student.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Binder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Binder logo" src="../../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
      
      
      
      <li><a href="https://colab.research.google.com/github/SizingLab/sizing_course/blob/main/laboratories/Lab-watt_project/10_LCA_Inductor-Student.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch on Colab"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img alt="Colab logo" src="../../_static/images/logo_colab.png">
  </span>
<span class="btn__text-container">Colab</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/SizingLab/sizing_course" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/SizingLab/sizing_course/edit/main/laboratories/Lab-watt_project/10_LCA_Inductor-Student.ipynb" target="_blank"
   class="btn btn-sm btn-source-edit-button dropdown-item"
   title="Suggest edit"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="btn__text-container">Suggest edit</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/SizingLab/sizing_course/issues/new?title=Issue%20on%20page%20%2Flaboratories/Lab-watt_project/10_LCA_Inductor-Student.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../_sources/laboratories/Lab-watt_project/10_LCA_Inductor-Student.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Life Cycle Assessment of an inductor (student version)</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scope-definition-of-the-lca">10.10.1. 1. Scope definition of the LCA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-for-the-lca">10.10.2. 2. Data for the LCA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lca-of-the-sized-inductor">10.10.3. 3. LCA of the sized inductor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#impacts-calculation">10.10.3.1. Impacts calculation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-and-interpretation">10.10.3.2. Visualization and interpretation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">10.10.4. 4. Sensitivity analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sizing-optimization-with-various-environmental-objectives">10.10.5. 5. Sizing optimization with various environmental objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-objective-optimization">10.10.6. 6. Multi-objective optimization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results-for-the-eco-design">10.10.6.1. Results for the eco-design</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-of-the-environmental-impacts-between-the-light-inductor-and-the-eco-designed-one">10.10.6.2. Comparison of the environmental impacts between the “light” inductor and the “eco-designed” one.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix">10.10.7. Appendix</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="life-cycle-assessment-of-an-inductor-student-version">
<h1><span class="section-number">10.10. </span>Life Cycle Assessment of an inductor (student version)<a class="headerlink" href="#life-cycle-assessment-of-an-inductor-student-version" title="Link to this heading">#</a></h1>
<p><em>Written by Félix Pollet, ISAE-Supaéro, France</em></p>
<p>The objective of this notebook is to conduct a life cycle assessment (LCA) on the inductor to evaluate its environmental impact over several categories such as climate change and depletion of material resources, among others.</p>
<p>In a second step, you will re-run the optimization process from notebook <a class="reference internal" href="06_SizingCodeInductor.html"><span class="std std-doc">06_SizingCodeInductor</span></a> with an environmental objective function instead of a mass minimization objective, and observe the changes in the design.</p>
<section id="scope-definition-of-the-lca">
<h2><span class="section-number">10.10.1. </span>1. Scope definition of the LCA<a class="headerlink" href="#scope-definition-of-the-lca" title="Link to this heading">#</a></h2>
<p>The first step in conducting an LCA is to define the scope of the study. We have to clearly state :</p>
<ul class="simple">
<li><p>The goal of the study, here it is to evaluate the environmental impacts of the inductor and minimize these impacts by resizing the inductor.</p></li>
<li><p>The functional unit, which represents a quantified description of the system and its performance.</p></li>
<li><p>The boundaries of the system, i.e. what is covered by the study and what is not.</p></li>
<li><p>Any other valuable information or assumption.</p></li>
</ul>
<p>Once the scope has been defined, you may build a process tree, which is a hierarchical representation of the materials and energy required to fulfill the functional unit.</p>
<blockquote>
<div><p><strong>Exercise (Scope definition)</strong> <br>
Provide a definition for the functional unit of the inductor and the boundaries of the system. Build the associated process tree.</p>
</div></blockquote>
</section>
<section id="data-for-the-lca">
<h2><span class="section-number">10.10.2. </span>2. Data for the LCA<a class="headerlink" href="#data-for-the-lca" title="Link to this heading">#</a></h2>
<p>Collecting data for a Life Cycle Inventory can be a time-consuming process. In this study, we will rely on a pre-existing database that directly provides the impacts associated with the production of the coil and the ferromagnetic core. This includes the entire production chain, from raw material extraction to the final product, including transportation from one site to another. In addition, the database provides the environmental impacts resulting from the production of 1 kWh of electricity, using the French electricity mix. This is useful to take into account the impact of energy losses.</p>
<blockquote>
<div><p><strong>Exercise (Get familiar with LCA data)</strong> <br>
The following lines import the databases and display the data over 16 impact categories, including climate change, particulate matter formation, and material resources depletion.<br>
Beware, the impacts are provided for 1 kg of final product, or, for the electricity, 1 kWh of electricity production.<br>
Have a first look at the impacts generated by the production of each component. Be curious about what represent each impact.</p>
</div></blockquote>
<p>Supplementary information on the impact categories:</p>
<p><img alt="impact_categories_1" src="https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/images/impact_categories_1.JPG" /></p>
<p><img alt="impact_categories_2" src="https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/images/impact_categories_2.JPG" /></p>
<p><a class="reference external" href="https://op.europa.eu/en/publication-detail/-/publication/c43b9684-4521-11ed-92ed-01aa75ed71a1/language-en">Source: Understanding Product Environmental Footprint and Organisation Environmental Footprint methods</a></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import libraries</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">display</span> <span class="k">as</span> <span class="n">ICD</span>
<span class="kn">import</span> <span class="nn">importlib</span>

<span class="c1"># Path to the database</span>
<span class="n">database_path</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/lca_inductance.xlsx&#39;</span>

<span class="c1"># Read LCA data for each &quot;background&quot; data of the process tree</span>
<span class="n">df_copper</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Copper wire (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_ferrite</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Ferrite (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_electricity</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Electricity France (1 kWh)&#39;</span><span class="p">)</span>

<span class="c1"># Display LCA results for each &quot;background&quot; data</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;LCA for the production of 1 kg of copper&quot;</span><span class="p">);</span> <span class="n">ICD</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">df_copper</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;LCA for the production of 1 kg of ferrite&quot;</span><span class="p">);</span> <span class="n">ICD</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">df_ferrite</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;LCA for the production of 1 kWh of electricity (France)&quot;</span><span class="p">);</span> <span class="n">ICD</span><span class="o">.</span><span class="n">display</span><span class="p">(</span><span class="n">df_electricity</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LCA for the production of 1 kg of copper
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Impact category</th>
      <th>Indicator</th>
      <th>Impact Score</th>
      <th>Unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>acidification</td>
      <td>accumulated exceedance (AE)</td>
      <td>5.816810e-01</td>
      <td>mol H+-Eq</td>
    </tr>
    <tr>
      <th>1</th>
      <td>climate change</td>
      <td>global warming potential (GWP100)</td>
      <td>7.433720e+00</td>
      <td>kg CO2-Eq</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ecotoxicity: freshwater</td>
      <td>comparative toxic unit for ecosystems (CTUe)</td>
      <td>6.632250e+02</td>
      <td>CTUe</td>
    </tr>
    <tr>
      <th>3</th>
      <td>energy resources: non-renewable</td>
      <td>abiotic depletion potential (ADP): fossil fuels</td>
      <td>9.333420e+01</td>
      <td>MJ, net calorific value</td>
    </tr>
    <tr>
      <th>4</th>
      <td>eutrophication: freshwater</td>
      <td>fraction of nutrients reaching freshwater end ...</td>
      <td>4.579140e-02</td>
      <td>kg P-Eq</td>
    </tr>
    <tr>
      <th>5</th>
      <td>eutrophication: marine</td>
      <td>fraction of nutrients reaching marine end comp...</td>
      <td>2.856350e-02</td>
      <td>kg N-Eq</td>
    </tr>
    <tr>
      <th>6</th>
      <td>eutrophication: terrestrial</td>
      <td>accumulated exceedance (AE)</td>
      <td>3.980400e-01</td>
      <td>mol N-Eq</td>
    </tr>
    <tr>
      <th>7</th>
      <td>human toxicity: carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>8.789730e-08</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>8</th>
      <td>human toxicity: non-carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>7.687160e-06</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>9</th>
      <td>ionising radiation: human health</td>
      <td>human exposure efficiency relative to u235</td>
      <td>8.552100e-01</td>
      <td>kBq U235-Eq</td>
    </tr>
    <tr>
      <th>10</th>
      <td>land use</td>
      <td>soil quality index</td>
      <td>1.848175e+02</td>
      <td>dimensionless</td>
    </tr>
    <tr>
      <th>11</th>
      <td>material resources: metals/minerals</td>
      <td>abiotic depletion potential (ADP): elements (u...</td>
      <td>7.467610e-03</td>
      <td>kg Sb-Eq</td>
    </tr>
    <tr>
      <th>12</th>
      <td>ozone depletion</td>
      <td>ozone depletion potential (ODP)</td>
      <td>8.562390e-08</td>
      <td>kg CFC-11-Eq</td>
    </tr>
    <tr>
      <th>13</th>
      <td>particulate matter formation</td>
      <td>impact on human health</td>
      <td>1.322611e-06</td>
      <td>disease incidence</td>
    </tr>
    <tr>
      <th>14</th>
      <td>photochemical oxidant formation: human health</td>
      <td>tropospheric ozone concentration increase</td>
      <td>1.136106e-01</td>
      <td>kg NMVOC-Eq</td>
    </tr>
    <tr>
      <th>15</th>
      <td>water use</td>
      <td>user deprivation potential (deprivation-weight...</td>
      <td>6.310940e+00</td>
      <td>m3 world eq. deprived</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LCA for the production of 1 kg of ferrite
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Impact category</th>
      <th>Indicator</th>
      <th>Impact Score</th>
      <th>Unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>acidification</td>
      <td>accumulated exceedance (AE)</td>
      <td>1.467400e-02</td>
      <td>mol H+-Eq</td>
    </tr>
    <tr>
      <th>1</th>
      <td>climate change</td>
      <td>global warming potential (GWP100)</td>
      <td>2.073400e+00</td>
      <td>kg CO2-Eq</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ecotoxicity: freshwater</td>
      <td>comparative toxic unit for ecosystems (CTUe)</td>
      <td>2.390300e+01</td>
      <td>CTUe</td>
    </tr>
    <tr>
      <th>3</th>
      <td>energy resources: non-renewable</td>
      <td>abiotic depletion potential (ADP): fossil fuels</td>
      <td>2.272700e+01</td>
      <td>MJ, net calorific value</td>
    </tr>
    <tr>
      <th>4</th>
      <td>eutrophication: freshwater</td>
      <td>fraction of nutrients reaching freshwater end ...</td>
      <td>8.475800e-04</td>
      <td>kg P-Eq</td>
    </tr>
    <tr>
      <th>5</th>
      <td>eutrophication: marine</td>
      <td>fraction of nutrients reaching marine end comp...</td>
      <td>3.329300e-03</td>
      <td>kg N-Eq</td>
    </tr>
    <tr>
      <th>6</th>
      <td>eutrophication: terrestrial</td>
      <td>accumulated exceedance (AE)</td>
      <td>3.572600e-02</td>
      <td>mol N-Eq</td>
    </tr>
    <tr>
      <th>7</th>
      <td>human toxicity: carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>9.170400e-08</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>8</th>
      <td>human toxicity: non-carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>2.892800e-08</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>9</th>
      <td>ionising radiation: human health</td>
      <td>human exposure efficiency relative to u235</td>
      <td>1.620100e-01</td>
      <td>kBq U235-Eq</td>
    </tr>
    <tr>
      <th>10</th>
      <td>land use</td>
      <td>soil quality index</td>
      <td>1.047100e+01</td>
      <td>dimensionless</td>
    </tr>
    <tr>
      <th>11</th>
      <td>material resources: metals/minerals</td>
      <td>abiotic depletion potential (ADP): elements (u...</td>
      <td>6.671600e-06</td>
      <td>kg Sb-Eq</td>
    </tr>
    <tr>
      <th>12</th>
      <td>ozone depletion</td>
      <td>ozone depletion potential (ODP)</td>
      <td>1.359400e-08</td>
      <td>kg CFC-11-Eq</td>
    </tr>
    <tr>
      <th>13</th>
      <td>particulate matter formation</td>
      <td>impact on human health</td>
      <td>1.566600e-07</td>
      <td>disease incidence</td>
    </tr>
    <tr>
      <th>14</th>
      <td>photochemical oxidant formation: human health</td>
      <td>tropospheric ozone concentration increase</td>
      <td>1.121300e-02</td>
      <td>kg NMVOC-Eq</td>
    </tr>
    <tr>
      <th>15</th>
      <td>water use</td>
      <td>user deprivation potential (deprivation-weight...</td>
      <td>3.686100e-01</td>
      <td>m3 world eq. deprived</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>LCA for the production of 1 kWh of electricity (France)
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Impact category</th>
      <th>Indicator</th>
      <th>Impact Score</th>
      <th>Unit</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>acidification</td>
      <td>accumulated exceedance (AE)</td>
      <td>3.318000e-04</td>
      <td>mol H+-Eq</td>
    </tr>
    <tr>
      <th>1</th>
      <td>climate change</td>
      <td>global warming potential (GWP100)</td>
      <td>7.769200e-02</td>
      <td>kg CO2-Eq</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ecotoxicity: freshwater</td>
      <td>comparative toxic unit for ecosystems (CTUe)</td>
      <td>3.723700e-01</td>
      <td>CTUe</td>
    </tr>
    <tr>
      <th>3</th>
      <td>energy resources: non-renewable</td>
      <td>abiotic depletion potential (ADP): fossil fuels</td>
      <td>1.161900e+01</td>
      <td>MJ, net calorific value</td>
    </tr>
    <tr>
      <th>4</th>
      <td>eutrophication: freshwater</td>
      <td>fraction of nutrients reaching freshwater end ...</td>
      <td>1.533300e-05</td>
      <td>kg P-Eq</td>
    </tr>
    <tr>
      <th>5</th>
      <td>eutrophication: marine</td>
      <td>fraction of nutrients reaching marine end comp...</td>
      <td>9.840600e-05</td>
      <td>kg N-Eq</td>
    </tr>
    <tr>
      <th>6</th>
      <td>eutrophication: terrestrial</td>
      <td>accumulated exceedance (AE)</td>
      <td>7.263700e-04</td>
      <td>mol N-Eq</td>
    </tr>
    <tr>
      <th>7</th>
      <td>human toxicity: carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>4.926400e-11</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>8</th>
      <td>human toxicity: non-carcinogenic</td>
      <td>comparative toxic unit for human (CTUh)</td>
      <td>1.099000e-09</td>
      <td>CTUh</td>
    </tr>
    <tr>
      <th>9</th>
      <td>ionising radiation: human health</td>
      <td>human exposure efficiency relative to u235</td>
      <td>5.266300e-01</td>
      <td>kBq U235-Eq</td>
    </tr>
    <tr>
      <th>10</th>
      <td>land use</td>
      <td>soil quality index</td>
      <td>3.482100e-01</td>
      <td>dimensionless</td>
    </tr>
    <tr>
      <th>11</th>
      <td>material resources: metals/minerals</td>
      <td>abiotic depletion potential (ADP): elements (u...</td>
      <td>6.396600e-07</td>
      <td>kg Sb-Eq</td>
    </tr>
    <tr>
      <th>12</th>
      <td>ozone depletion</td>
      <td>ozone depletion potential (ODP)</td>
      <td>3.139500e-09</td>
      <td>kg CFC-11-Eq</td>
    </tr>
    <tr>
      <th>13</th>
      <td>particulate matter formation</td>
      <td>impact on human health</td>
      <td>4.493600e-09</td>
      <td>disease incidence</td>
    </tr>
    <tr>
      <th>14</th>
      <td>photochemical oxidant formation: human health</td>
      <td>tropospheric ozone concentration increase</td>
      <td>2.557400e-04</td>
      <td>kg NMVOC-Eq</td>
    </tr>
    <tr>
      <th>15</th>
      <td>water use</td>
      <td>user deprivation potential (deprivation-weight...</td>
      <td>1.346600e-01</td>
      <td>m3 world eq. deprived</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</section>
<section id="lca-of-the-sized-inductor">
<h2><span class="section-number">10.10.3. </span>3. LCA of the sized inductor<a class="headerlink" href="#lca-of-the-sized-inductor" title="Link to this heading">#</a></h2>
<section id="impacts-calculation">
<h3><span class="section-number">10.10.3.1. </span>Impacts calculation<a class="headerlink" href="#impacts-calculation" title="Link to this heading">#</a></h3>
<p>Now that we know how much impacts correspond to the production of 1 kg of copper, 1 kg of ferrite pot, and 1 kWh of electricity, the next step is to calculate the total impact of the inductor. In this notebook, we will re-use the results obtained in notebook <a class="reference internal" href="07_SizingCodeInductor-Surrogate.html"><span class="std std-doc">07_SizingCodeInductor-Surrogate</span></a>.</p>
<blockquote>
<div><p><strong>Exercise (Calculate the impacts for the inductor system)</strong><br>
Using the process tree, calculate the impacts of the inductor by summing the impacts of each subprocess.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># TO COMPLETE</span>
<span class="c1"># Values obtained with the sizing code</span>
<span class="n">M_ferrite</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kg]</span>
<span class="n">M_copper</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kg]</span>
<span class="n">M_total</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kg]</span>
<span class="n">PJ</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kW]</span>

<span class="c1"># Parameters for the life cycle assessment</span>
<span class="n">Crr</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># [-] rolling resistance coefficient  </span>
<span class="n">E_J</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kWh] Joules losses</span>
<span class="n">E_fr</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># [kWh] Friction losses at bus level due to inductor&#39;s mass</span>

<span class="c1"># Create a dictionary to store the LCA database of each component and the corresponding sizing parameters</span>
<span class="n">dataframes_and_params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;Copper wire (1 kg)&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">:</span> <span class="n">df_copper</span><span class="p">,</span> <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">M_copper</span><span class="p">},</span>
    <span class="s1">&#39;Ferrite core (1 kg)&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">:</span> <span class="n">df_ferrite</span><span class="p">,</span> <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">M_ferrite</span><span class="p">},</span>
    <span class="s1">&#39;Joules losses&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">:</span> <span class="n">df_electricity</span><span class="p">,</span> <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">E_J</span><span class="p">},</span>
    <span class="s1">&#39;Friction losses&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;df&#39;</span><span class="p">:</span> <span class="n">df_electricity</span><span class="p">,</span> <span class="s1">&#39;param&#39;</span><span class="p">:</span> <span class="n">E_fr</span><span class="p">}</span>
<span class="p">}</span>

<span class="c1"># Create an empty DataFrame to store the final results</span>
<span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">,</span> <span class="s2">&quot;Indicator&quot;</span><span class="p">,</span> <span class="s2">&quot;Unit&quot;</span><span class="p">])</span>

<span class="c1"># Populate the result DataFrame with the impacts of each component</span>
<span class="k">for</span> <span class="n">component</span><span class="p">,</span> <span class="n">data</span> <span class="ow">in</span> <span class="n">dataframes_and_params</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;df&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
    <span class="n">param</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]</span>
    
    <span class="c1"># Multiply the &quot;Impact Score&quot; by the parameter</span>
    <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Impact Score&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">param</span>
    
    <span class="c1"># Rename the &quot;Impact Score&quot; column to include the name of the corresponding component</span>
    <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Impact Score&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Impact Score (</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    
    <span class="c1"># Merge the DataFrames based on the common columns</span>
    <span class="n">result_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">result_df</span><span class="p">,</span> <span class="n">df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;outer&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">,</span> <span class="s2">&quot;Indicator&quot;</span><span class="p">,</span> <span class="s2">&quot;Unit&quot;</span><span class="p">])</span>

<span class="c1"># Calculate the total impact score by aggregating the impacts of each component</span>
<span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Impact Score (Total)&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_df</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">like</span><span class="o">=</span><span class="s1">&#39;Impact Score&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># Display the results</span>
<span class="n">result_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">line</span> <span class="mi">30</span>
<span class="g g-Whitespace">     </span><span class="mi">27</span> <span class="n">param</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s1">&#39;param&#39;</span><span class="p">]</span>
<span class="g g-Whitespace">     </span><span class="mi">29</span> <span class="c1"># Multiply the &quot;Impact Score&quot; by the parameter</span>
<span class="ne">---&gt; </span><span class="mi">30</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;Impact Score&#39;</span><span class="p">]</span> <span class="o">*=</span> <span class="n">param</span>
<span class="g g-Whitespace">     </span><span class="mi">32</span> <span class="c1"># Rename the &quot;Impact Score&quot; column to include the name of the corresponding component</span>
<span class="g g-Whitespace">     </span><span class="mi">33</span> <span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;Impact Score&#39;</span><span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;Impact Score (</span><span class="si">{</span><span class="n">component</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s1">)&#39;</span><span class="p">},</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/generic.py:12104,</span> in <span class="ni">NDFrame.__imul__</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">  </span><span class="mi">12102</span> <span class="k">def</span> <span class="fm">__imul__</span><span class="p">(</span><span class="bp">self</span><span class="p">:</span> <span class="n">NDFrameT</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">NDFrameT</span><span class="p">:</span>
<span class="g g-Whitespace">  </span><span class="mi">12103</span>     <span class="c1"># error: Unsupported left operand type for * (&quot;Type[NDFrame]&quot;)</span>
<span class="ne">&gt; </span><span class="mi">12104</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_inplace_method</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="fm">__mul__</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/generic.py:12073,</span> in <span class="ni">NDFrame._inplace_method</span><span class="nt">(self, other, op)</span>
<span class="g g-Whitespace">  </span><span class="mi">12068</span> <span class="nd">@final</span>
<span class="g g-Whitespace">  </span><span class="mi">12069</span> <span class="k">def</span> <span class="nf">_inplace_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="g g-Whitespace">  </span><span class="mi">12070</span><span class="w">     </span><span class="sd">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">  </span><span class="mi">12071</span><span class="sd">     Wrap arithmetic method to operate inplace.</span>
<span class="g g-Whitespace">  </span><span class="mi">12072</span><span class="sd">     &quot;&quot;&quot;</span>
<span class="ne">&gt; </span><span class="mi">12073</span>     <span class="n">result</span> <span class="o">=</span> <span class="n">op</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="g g-Whitespace">  </span><span class="mi">12075</span>     <span class="k">if</span> <span class="p">(</span>
<span class="g g-Whitespace">  </span><span class="mi">12076</span>         <span class="bp">self</span><span class="o">.</span><span class="n">ndim</span> <span class="o">==</span> <span class="mi">1</span>
<span class="g g-Whitespace">  </span><span class="mi">12077</span>         <span class="ow">and</span> <span class="n">result</span><span class="o">.</span><span class="n">_indexed_same</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
<span class="g g-Whitespace">  </span><span class="mi">12078</span>         <span class="ow">and</span> <span class="n">is_dtype_equal</span><span class="p">(</span><span class="n">result</span><span class="o">.</span><span class="n">dtype</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span>
<span class="g g-Whitespace">  </span><span class="mi">12079</span>     <span class="p">):</span>
<span class="g g-Whitespace">  </span><span class="mi">12080</span>         <span class="c1"># GH#36498 this inplace op can _actually_ be inplace.</span>
<span class="g g-Whitespace">  </span><span class="mi">12081</span>         <span class="bp">self</span><span class="o">.</span><span class="n">_values</span><span class="p">[:]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">_values</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/ops/common.py:72,</span> in <span class="ni">_unpack_zerodim_and_defer.&lt;locals&gt;.new_method</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">     </span><span class="mi">68</span>             <span class="k">return</span> <span class="bp">NotImplemented</span>
<span class="g g-Whitespace">     </span><span class="mi">70</span> <span class="n">other</span> <span class="o">=</span> <span class="n">item_from_zerodim</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">72</span> <span class="k">return</span> <span class="n">method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/arraylike.py:118,</span> in <span class="ni">OpsMixin.__mul__</span><span class="nt">(self, other)</span>
<span class="g g-Whitespace">    </span><span class="mi">116</span> <span class="nd">@unpack_zerodim_and_defer</span><span class="p">(</span><span class="s2">&quot;__mul__&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">117</span> <span class="k">def</span> <span class="fm">__mul__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">118</span>     <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_arith_method</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/series.py:6259,</span> in <span class="ni">Series._arith_method</span><span class="nt">(self, other, op)</span>
<span class="g g-Whitespace">   </span><span class="mi">6257</span> <span class="k">def</span> <span class="nf">_arith_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">6258</span>     <span class="bp">self</span><span class="p">,</span> <span class="n">other</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">align_method_SERIES</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6259</span>     <span class="k">return</span> <span class="n">base</span><span class="o">.</span><span class="n">IndexOpsMixin</span><span class="o">.</span><span class="n">_arith_method</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/base.py:1325,</span> in <span class="ni">IndexOpsMixin._arith_method</span><span class="nt">(self, other, op)</span>
<span class="g g-Whitespace">   </span><span class="mi">1322</span> <span class="n">rvalues</span> <span class="o">=</span> <span class="n">ensure_wrapped_if_datetimelike</span><span class="p">(</span><span class="n">rvalues</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1324</span> <span class="k">with</span> <span class="n">np</span><span class="o">.</span><span class="n">errstate</span><span class="p">(</span><span class="nb">all</span><span class="o">=</span><span class="s2">&quot;ignore&quot;</span><span class="p">):</span>
<span class="ne">-&gt; </span><span class="mi">1325</span>     <span class="n">result</span> <span class="o">=</span> <span class="n">ops</span><span class="o">.</span><span class="n">arithmetic_op</span><span class="p">(</span><span class="n">lvalues</span><span class="p">,</span> <span class="n">rvalues</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">1327</span> <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_construct_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">res_name</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/ops/array_ops.py:226,</span> in <span class="ni">arithmetic_op</span><span class="nt">(left, right, op)</span>
<span class="g g-Whitespace">    </span><span class="mi">222</span>     <span class="n">_bool_arith_check</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">224</span>     <span class="c1"># error: Argument 1 to &quot;_na_arithmetic_op&quot; has incompatible type</span>
<span class="g g-Whitespace">    </span><span class="mi">225</span>     <span class="c1"># &quot;Union[ExtensionArray, ndarray[Any, Any]]&quot;; expected &quot;ndarray[Any, Any]&quot;</span>
<span class="ne">--&gt; </span><span class="mi">226</span>     <span class="n">res_values</span> <span class="o">=</span> <span class="n">_na_arithmetic_op</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>  <span class="c1"># type: ignore[arg-type]</span>
<span class="g g-Whitespace">    </span><span class="mi">228</span> <span class="k">return</span> <span class="n">res_values</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/ops/array_ops.py:165,</span> in <span class="ni">_na_arithmetic_op</span><span class="nt">(left, right, op, is_cmp)</span>
<span class="g g-Whitespace">    </span><span class="mi">162</span>     <span class="n">func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">expressions</span><span class="o">.</span><span class="n">evaluate</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">164</span> <span class="k">try</span><span class="p">:</span>
<span class="ne">--&gt; </span><span class="mi">165</span>     <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="n">left</span><span class="p">,</span> <span class="n">right</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">166</span> <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">167</span>     <span class="k">if</span> <span class="ow">not</span> <span class="n">is_cmp</span> <span class="ow">and</span> <span class="p">(</span><span class="n">is_object_dtype</span><span class="p">(</span><span class="n">left</span><span class="o">.</span><span class="n">dtype</span><span class="p">)</span> <span class="ow">or</span> <span class="n">is_object_dtype</span><span class="p">(</span><span class="n">right</span><span class="p">)):</span>
<span class="g g-Whitespace">    </span><span class="mi">168</span>         <span class="c1"># For object dtype, fallback to a masked operation (only operating</span>
<span class="g g-Whitespace">    </span><span class="mi">169</span>         <span class="c1">#  on the non-missing values)</span>
<span class="g g-Whitespace">    </span><span class="mi">170</span>         <span class="c1"># Don&#39;t do this for comparisons, as that will handle complex numbers</span>
<span class="g g-Whitespace">    </span><span class="mi">171</span>         <span class="c1">#  incorrectly, see GH#32047</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/computation/expressions.py:241,</span> in <span class="ni">evaluate</span><span class="nt">(op, a, b, use_numexpr)</span>
<span class="g g-Whitespace">    </span><span class="mi">238</span> <span class="k">if</span> <span class="n">op_str</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">239</span>     <span class="k">if</span> <span class="n">use_numexpr</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">240</span>         <span class="c1"># error: &quot;None&quot; not callable</span>
<span class="ne">--&gt; </span><span class="mi">241</span>         <span class="k">return</span> <span class="n">_evaluate</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">op_str</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>  <span class="c1"># type: ignore[misc]</span>
<span class="g g-Whitespace">    </span><span class="mi">242</span> <span class="k">return</span> <span class="n">_evaluate_standard</span><span class="p">(</span><span class="n">op</span><span class="p">,</span> <span class="n">op_str</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/computation/expressions.py:70,</span> in <span class="ni">_evaluate_standard</span><span class="nt">(op, op_str, a, b)</span>
<span class="g g-Whitespace">     </span><span class="mi">68</span> <span class="k">if</span> <span class="n">_TEST_MODE</span><span class="p">:</span>
<span class="g g-Whitespace">     </span><span class="mi">69</span>     <span class="n">_store_test_result</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="ne">---&gt; </span><span class="mi">70</span> <span class="k">return</span> <span class="n">op</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for *: &#39;float&#39; and &#39;ellipsis&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="visualization-and-interpretation">
<h3><span class="section-number">10.10.3.2. </span>Visualization and interpretation<a class="headerlink" href="#visualization-and-interpretation" title="Link to this heading">#</a></h3>
<p>It is now possible to visualize the results over each impact category.</p>
<p>The following figure provides the results obtained over the impact categories, expressed in the physical units specific to each category.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the LCA results</span>
<span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Impact category&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Unit&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Impact Category&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Impact Score (unit specific to each category)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Impact Score for Each Impact Category&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">line</span> <span class="mi">3</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Plot the LCA results</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Impact category&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39; (&#39;</span> <span class="o">+</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Unit&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="s1">&#39;)&#39;</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Impact Category&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/frame.py:3813,</span> in <span class="ni">DataFrame.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3811</span>     <span class="k">if</span> <span class="n">is_iterator</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3812</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3813</span>     <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">_get_indexer_strict</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;columns&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">3815</span> <span class="c1"># take() does not accept boolean indexers</span>
<span class="g g-Whitespace">   </span><span class="mi">3816</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="s2">&quot;dtype&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6070,</span> in <span class="ni">Index._get_indexer_strict</span><span class="nt">(self, key, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6067</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6068</span>     <span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">new_indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_non_unique</span><span class="p">(</span><span class="n">keyarr</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6070</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_missing</span><span class="p">(</span><span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6072</span> <span class="n">keyarr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6073</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">Index</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">6074</span>     <span class="c1"># GH 42790 - Preserve name from an Index</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6130,</span> in <span class="ni">Index._raise_if_missing</span><span class="nt">(self, key, indexer, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6128</span>     <span class="k">if</span> <span class="n">use_interval_msg</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6129</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6130</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;None of [</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">] are in the [</span><span class="si">{</span><span class="n">axis_name</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6132</span> <span class="n">not_found</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ensure_index</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="n">missing_mask</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="g g-Whitespace">   </span><span class="mi">6133</span> <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">not_found</span><span class="si">}</span><span class="s2"> not in index&quot;</span><span class="p">)</span>

<span class="ne">KeyError</span>: &quot;None of [Index([&#39;Impact Score (Copper)&#39;, &#39;Impact Score (Ferrite)&#39;,\n       &#39;Impact Score (Joules)&#39;, &#39;Impact Score (Friction)&#39;],\n      dtype=&#39;object&#39;)] are in the [columns]&quot;
</pre></div>
</div>
</div>
</div>
<p>It is not easy to read, right? This is because each impact category is expressed with its own unit, so that the values varies highly from one category to another.</p>
<p>What we can do is to have a look at the contributions, in percent, of each component (copper, ferrite and energy losses) across each impact category:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Contributions</span>
<span class="n">result_df_percent</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">result_df_percent</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Impact Category&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Contribution to Impact Score (%)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Contributions to Impact Score for Each Impact Category&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">4</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Contributions</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">result_df_percent</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">*</span><span class="mi">100</span><span class="o">/</span><span class="nb">sum</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">result_df_percent</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/frame.py:3813,</span> in <span class="ni">DataFrame.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3811</span>     <span class="k">if</span> <span class="n">is_iterator</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3812</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3813</span>     <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">_get_indexer_strict</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;columns&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">3815</span> <span class="c1"># take() does not accept boolean indexers</span>
<span class="g g-Whitespace">   </span><span class="mi">3816</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="s2">&quot;dtype&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6070,</span> in <span class="ni">Index._get_indexer_strict</span><span class="nt">(self, key, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6067</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6068</span>     <span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">new_indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_non_unique</span><span class="p">(</span><span class="n">keyarr</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6070</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_missing</span><span class="p">(</span><span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6072</span> <span class="n">keyarr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6073</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">Index</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">6074</span>     <span class="c1"># GH 42790 - Preserve name from an Index</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6130,</span> in <span class="ni">Index._raise_if_missing</span><span class="nt">(self, key, indexer, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6128</span>     <span class="k">if</span> <span class="n">use_interval_msg</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6129</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6130</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;None of [</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">] are in the [</span><span class="si">{</span><span class="n">axis_name</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6132</span> <span class="n">not_found</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ensure_index</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="n">missing_mask</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="g g-Whitespace">   </span><span class="mi">6133</span> <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">not_found</span><span class="si">}</span><span class="s2"> not in index&quot;</span><span class="p">)</span>

<span class="ne">KeyError</span>: &quot;None of [Index([&#39;Impact Score (Copper)&#39;, &#39;Impact Score (Ferrite)&#39;,\n       &#39;Impact Score (Joules)&#39;, &#39;Impact Score (Friction)&#39;],\n      dtype=&#39;object&#39;)] are in the [columns]&quot;
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p><strong>Exercise 1 (Contributions)</strong> <br>
For each impact category, what are the main contributors?<br>
What would you expect if we had to re-size the inductor in order to minimize these impacts?<br></p>
</div></blockquote>
<blockquote>
<div><p><strong>Exercise 2 (Most relevant impacts?)</strong> <br>
With the two previous plots, is it possible to compare the different impact categories with each other? Why?</p>
</div></blockquote>
<blockquote>
<div><p><strong>Answer to exercise 2</strong> <br>
Environmental impact scores in LCA are expressed in different physical units, so it is not possible to compare the different categories directly.<br>
One solution is to <em>normalize</em> the impacts with respect to a reference system, so that the results are expressed without unit.<br>
To do so, we have to divide our results by the scores obtained for a reference situation (for example, the total impacts resulting from transportation systems in France, in 2023). This enables to get a standard scale to compare the impacts.</p>
</div></blockquote>
<p>In what follows, we use the normalization factors provided by the <a class="reference external" href="https://publications.jrc.ec.europa.eu/repository/bitstream/JRC109878/kjna28984enn_global_norm_factors.pdf">Environmental Footprint method</a>, which express the average impacts of one european citizen in the year 2010. For example, the normalization factor for the “climate change” category is equal to 8100 kgCO2-eq.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Read the normalization factors from the excel file</span>
<span class="n">normalization_factors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/normalisation_weighting_factors.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;NF SETS&#39;</span><span class="p">)</span>

<span class="c1"># Create a copy of the results dataframe and add the normalization factors for each impact category</span>
<span class="n">result_df_normalized</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">result_df</span><span class="p">,</span> <span class="n">normalization_factors_df</span><span class="p">,</span> <span class="n">how</span><span class="o">=</span><span class="s1">&#39;left&#39;</span><span class="p">,</span> <span class="n">on</span><span class="o">=</span><span class="s1">&#39;Impact category&#39;</span><span class="p">)</span>

<span class="c1"># Divide each &quot;Impact Score&quot; column by the corresponding normalization factor</span>
<span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="p">[</span><span class="n">col</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">result_df</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="s1">&#39;Impact Score&#39;</span> <span class="ow">in</span> <span class="n">col</span><span class="p">]:</span>
    <span class="n">result_df_normalized</span><span class="p">[</span><span class="n">col</span><span class="p">]</span> <span class="o">/=</span> <span class="n">result_df_normalized</span><span class="p">[</span><span class="s1">&#39;Normalization factor&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the LCA results</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">result_df_normalized</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df_normalized</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Impact Category&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Normalized Impact Score&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s2">&quot;Normalized Impact Score for Each Impact Category&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">KeyError</span><span class="g g-Whitespace">                                  </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">6</span><span class="p">],</span> <span class="n">line</span> <span class="mi">2</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="c1"># Plot the LCA results</span>
<span class="ne">----&gt; </span><span class="mi">2</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">result_df_normalized</span><span class="p">[[</span><span class="s1">&#39;Impact Score (Copper)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Ferrite)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Joules)&#39;</span><span class="p">,</span> <span class="s1">&#39;Impact Score (Friction)&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">stacked</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">result_df_normalized</span><span class="p">[</span><span class="s1">&#39;XLabels&#39;</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Impact Category&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/frame.py:3813,</span> in <span class="ni">DataFrame.__getitem__</span><span class="nt">(self, key)</span>
<span class="g g-Whitespace">   </span><span class="mi">3811</span>     <span class="k">if</span> <span class="n">is_iterator</span><span class="p">(</span><span class="n">key</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">3812</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">3813</span>     <span class="n">indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">_get_indexer_strict</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;columns&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
<span class="g g-Whitespace">   </span><span class="mi">3815</span> <span class="c1"># take() does not accept boolean indexers</span>
<span class="g g-Whitespace">   </span><span class="mi">3816</span> <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">indexer</span><span class="p">,</span> <span class="s2">&quot;dtype&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span> <span class="o">==</span> <span class="nb">bool</span><span class="p">:</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6070,</span> in <span class="ni">Index._get_indexer_strict</span><span class="nt">(self, key, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6067</span> <span class="k">else</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6068</span>     <span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">new_indexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_reindex_non_unique</span><span class="p">(</span><span class="n">keyarr</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6070</span> <span class="bp">self</span><span class="o">.</span><span class="n">_raise_if_missing</span><span class="p">(</span><span class="n">keyarr</span><span class="p">,</span> <span class="n">indexer</span><span class="p">,</span> <span class="n">axis_name</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6072</span> <span class="n">keyarr</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">take</span><span class="p">(</span><span class="n">indexer</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6073</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">Index</span><span class="p">):</span>
<span class="g g-Whitespace">   </span><span class="mi">6074</span>     <span class="c1"># GH 42790 - Preserve name from an Index</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/pandas/core/indexes/base.py:6130,</span> in <span class="ni">Index._raise_if_missing</span><span class="nt">(self, key, indexer, axis_name)</span>
<span class="g g-Whitespace">   </span><span class="mi">6128</span>     <span class="k">if</span> <span class="n">use_interval_msg</span><span class="p">:</span>
<span class="g g-Whitespace">   </span><span class="mi">6129</span>         <span class="n">key</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="ne">-&gt; </span><span class="mi">6130</span>     <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;None of [</span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">] are in the [</span><span class="si">{</span><span class="n">axis_name</span><span class="si">}</span><span class="s2">]&quot;</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">6132</span> <span class="n">not_found</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ensure_index</span><span class="p">(</span><span class="n">key</span><span class="p">)[</span><span class="n">missing_mask</span><span class="o">.</span><span class="n">nonzero</span><span class="p">()[</span><span class="mi">0</span><span class="p">]]</span><span class="o">.</span><span class="n">unique</span><span class="p">())</span>
<span class="g g-Whitespace">   </span><span class="mi">6133</span> <span class="k">raise</span> <span class="ne">KeyError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">not_found</span><span class="si">}</span><span class="s2"> not in index&quot;</span><span class="p">)</span>

<span class="ne">KeyError</span>: &quot;None of [Index([&#39;Impact Score (Copper)&#39;, &#39;Impact Score (Ferrite)&#39;,\n       &#39;Impact Score (Joules)&#39;, &#39;Impact Score (Friction)&#39;],\n      dtype=&#39;object&#39;)] are in the [columns]&quot;
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p><strong>Exercise (Interpretation with normalized results)</strong><br>
Have a look at the normalized results. What impact categories are the most relevant?</p>
</div></blockquote>
</section>
</section>
<section id="sensitivity-analysis">
<h2><span class="section-number">10.10.4. </span>4. Sensitivity analysis<a class="headerlink" href="#sensitivity-analysis" title="Link to this heading">#</a></h2>
<p>In the first place, we have assumed that the inductor will be used for <span class="math notranslate nohighlight">\(T_{use}=14,600\)</span> hours during its lifetime. However, this assumption may be too pessimistic or optimistic. The LCA practitioner must always check the sensitivity of the results to the assumptions to ensure the robustness of the study.</p>
<blockquote>
<div><p><strong>Exercise (Sensitivity to lifetime assumption)</strong><br>
Re-run the analysis for different assumptions over the inductors’s lifetime, for example <span class="math notranslate nohighlight">\(T_{use}\)</span> ranging from 10,000 to 20,000 hours. Do you observe any difference?</p>
</div></blockquote>
<p>In the following, we will keep <span class="math notranslate nohighlight">\(T_{use}= 5 \times 365 \times 8 = 14,600\)</span> hours.</p>
</section>
<section id="sizing-optimization-with-various-environmental-objectives">
<h2><span class="section-number">10.10.5. </span>5. Sizing optimization with various environmental objectives<a class="headerlink" href="#sizing-optimization-with-various-environmental-objectives" title="Link to this heading">#</a></h2>
<p>We will now focus on re-sizing the inductor to minimize the environmental impacts instead of the mass.</p>
<p>To do so, we have to change the objective function in the sizing code.</p>
<blockquote>
<div><p><strong>Exercise (Sizing code modification)</strong><br>
Modify the sizing code to return the environmental impact of the inductor for the requested category.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">scipy.optimize</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="kn">import</span> <span class="nn">timeit</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Specifications</span>
<span class="n">IL_max</span><span class="o">=</span><span class="mi">150</span> <span class="c1"># [A] max current</span>
<span class="n">IL_RMS</span><span class="o">=</span><span class="mi">140</span> <span class="c1"># [A] RMS current</span>
<span class="n">L</span><span class="o">=</span><span class="mf">150e-6</span> <span class="c1"># [H] Inductance</span>
 
<span class="c1"># Assumptions</span>
<span class="c1">#J=5e6 # [A/m²] Current density</span>
<span class="n">B_mag</span><span class="o">=</span><span class="mf">0.4</span> <span class="c1"># [T] Induction</span>
<span class="n">k_bob</span><span class="o">=</span><span class="mf">0.33</span> <span class="c1"># [-] winding coefficient</span>
<span class="n">T_amb</span><span class="o">=</span><span class="mi">60</span> <span class="c1"># [°C] Support temperature</span>
<span class="n">T_max</span><span class="o">=</span><span class="mi">150</span> <span class="c1"># [°C] Max temperature</span>

<span class="c1"># Physical constants</span>
<span class="n">mu_0</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="mf">3.14e-7</span> <span class="c1"># [SI] permeability</span>

<span class="c1"># Reference parameters for scaling laws (Pot core)</span>
<span class="n">D_ref</span><span class="o">=</span><span class="mf">66.29e-3</span> <span class="c1"># [m] External diameter</span>
<span class="n">H_ref</span><span class="o">=</span><span class="mf">57.3e-3</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># [m] 1 half core height</span>
<span class="n">Airon_ref</span><span class="o">=</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">(</span><span class="mf">29.19</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">6.5</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mf">1e-6</span>    <span class="c1"># [m^2] iron surface</span>
<span class="n">Awind_ref</span><span class="o">=</span><span class="mf">43.28</span><span class="o">*</span><span class="p">(</span><span class="mf">54.51</span><span class="o">-</span><span class="mf">28.19</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mf">1e-6</span>    <span class="c1"># [m^2] winding surface</span>
<span class="n">Rmoy_ref</span><span class="o">=</span><span class="p">(</span><span class="mf">54.51</span><span class="o">-</span><span class="mf">28.19</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mf">1e-3</span> <span class="c1"># [m] Mean radius for winding</span>
<span class="n">M_ref</span><span class="o">=</span><span class="mf">225e-3</span>  <span class="c1"># [kg] 1 half core mass</span>

<span class="c1"># Additional parameters useful for the life cycle assessment</span>
<span class="n">T_use</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># [hrs] lifetime service</span>
<span class="n">D_use</span> <span class="o">=</span> <span class="o">...</span> <span class="c1"># [km] corresponding travel distance</span>
<span class="n">Crr</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># [-] rolling resistance coefficient  </span>

<span class="c1"># Database for LCA</span>
<span class="n">database_path</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/lca_inductance.xlsx&#39;</span> <span class="c1"># Path to the database</span>
<span class="n">df_copper</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Copper wire (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_ferrite</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Ferrite (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_electricity</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Electricity France (1 kWh)&#39;</span><span class="p">)</span>
<span class="n">df_plastic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Plastic body (1 kg)&#39;</span><span class="p">)</span>
<span class="n">normalization_factors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/normalisation_weighting_factors.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;NF SETS&#39;</span><span class="p">)</span>


<span class="c1"># -----------------------</span>
<span class="c1"># sizing code</span>
<span class="c1"># -----------------------</span>
<span class="c1"># inputs: </span>
<span class="c1"># - param: optimisation variables vector </span>
<span class="c1"># - arg: selection of output  </span>
<span class="c1"># output: </span>
<span class="c1"># - objective if arg=&#39;Obj&#39;, problem characteristics if arg=&#39;Prt&#39;, constraints other else</span>

<span class="k">def</span> <span class="nf">SizingInductor</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="c1"># Variables</span>
    <span class="n">e_D</span><span class="o">=</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># [m] air gap / External diameter</span>
    <span class="n">J</span><span class="o">=</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">1e6</span> <span class="c1"># [A/m²] current density</span>
    
    <span class="c1"># Magnetic pi_0</span>
    <span class="n">PI0_m</span><span class="o">=</span><span class="mf">3.86</span><span class="o">*</span><span class="n">e_D</span><span class="o">**</span><span class="p">(</span><span class="mf">0.344</span><span class="o">-</span><span class="mf">0.226</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">e_D</span><span class="p">)</span><span class="o">-</span><span class="mf">0.0355</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">e_D</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="c1"># Magnetic energy calculation</span>
    <span class="n">E_mag</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">L</span><span class="o">*</span><span class="n">IL_max</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># [J] Energy</span>
    
    <span class="n">D</span><span class="o">=</span><span class="p">(</span><span class="n">E_mag</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">PI0_m</span><span class="o">*</span><span class="n">D_ref</span><span class="o">**</span><span class="mi">4</span><span class="o">/</span><span class="n">J</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">k_bob</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">Awind_ref</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">mu_0</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># External diameter calculation</span>
          
    <span class="c1"># Reluctance and inductance</span>
    <span class="n">RL</span><span class="o">=</span><span class="n">PI0_m</span><span class="o">/</span><span class="n">mu_0</span><span class="o">/</span><span class="n">D</span>  <span class="c1"># [] reluctance</span>
    <span class="n">N</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">L</span><span class="o">*</span><span class="n">RL</span><span class="p">)</span> <span class="c1"># [-] turn number</span>
    
    <span class="c1"># Wire section &amp; winding surface</span>
    <span class="n">S_w</span><span class="o">=</span><span class="n">IL_RMS</span><span class="o">/</span><span class="n">J</span> <span class="c1"># [m²] 1 wire section area</span>
    <span class="n">S_bob</span><span class="o">=</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">/</span><span class="n">k_bob</span> <span class="c1"># [m^2] winding surface</span>
  
    <span class="c1"># Core scaling</span>
    <span class="n">A_iron</span><span class="o">=</span><span class="n">Airon_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># [m^2] iron surface</span>
    <span class="n">A_wind</span><span class="o">=</span><span class="n">Awind_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># [m^2] winding surface</span>
    <span class="n">H</span><span class="o">=</span><span class="n">H_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># [m] 1 half core height    </span>
    <span class="n">Rmoy</span><span class="o">=</span><span class="n">Rmoy_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># [m] Mean radius for winding</span>
    
    <span class="n">M_core</span> <span class="o">=</span><span class="n">M_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># [kg] one half core mass</span>

    <span class="c1"># Magnetic field</span>
    <span class="n">B</span><span class="o">=</span><span class="n">N</span><span class="o">*</span><span class="n">IL_max</span><span class="o">/</span><span class="n">RL</span><span class="o">/</span><span class="n">A_iron</span> <span class="c1"># [T]</span>
    
    <span class="c1"># Mass</span>
    <span class="n">M_copper</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">Rmoy</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">*</span><span class="mi">7800</span>
    <span class="n">M_total</span><span class="o">=</span><span class="n">M_copper</span><span class="o">+</span><span class="n">M_core</span><span class="o">*</span><span class="mi">2</span>
    
    <span class="c1"># Temperature calculation</span>
    <span class="n">PI0_t</span> <span class="o">=</span> <span class="mf">0.0786</span> <span class="o">+</span> <span class="mf">0.524</span><span class="o">*</span><span class="n">e_D</span> <span class="o">-</span><span class="mf">2.04</span><span class="o">*</span><span class="n">e_D</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># PI0 thermal</span>
    <span class="n">Rth</span><span class="o">=</span><span class="n">PI0_t</span><span class="o">/</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">D</span><span class="p">)</span> <span class="c1"># [K/W] thermal resistance</span>
    
    <span class="n">PJ</span><span class="o">=</span><span class="n">J</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">Rmoy</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">*</span><span class="mf">1.7e-8</span> <span class="c1"># [W] Joules losses</span>
    
    <span class="n">Teta_hot</span><span class="o">=</span><span class="n">T_amb</span> <span class="o">+</span> <span class="n">PJ</span><span class="o">*</span><span class="n">Rth</span> <span class="c1"># [°C] Hot spot temperature</span>
    
    <span class="c1"># Energy losses</span>
    <span class="n">E_PJ</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kWh] Joule losses over the life cycle of the inductor</span>
    <span class="n">E_fr</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kWh] friction losses (at bus level) due to the inductor&#39;s mass</span>
    <span class="n">E_total</span> <span class="o">=</span> <span class="n">E_PJ</span> <span class="o">+</span> <span class="n">E_fr</span>
    
    <span class="c1"># Objective and contraints</span>
    <span class="k">if</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;mass&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">M_total</span>
    
    <span class="k">elif</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">E_total</span> <span class="o">/</span> <span class="mi">100</span>  <span class="c1"># factor 100 to facilitate optimization convergence (result closer to unity)</span>
    
    <span class="k">elif</span> <span class="n">arg</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;acidification&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;climate change&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ecotoxicity: freshwater&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;energy resources: non-renewable&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: freshwater&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: marine&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: terrestrial&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;human toxicity: carcinogenic&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;human toxicity: non-carcinogenic&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ionising radiation: human health&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;land use&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;material resources: metals/minerals&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ozone depletion&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;particulate matter formation&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;photochemical oxidant formation: human health&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;water use&quot;</span>
                <span class="p">]:</span>
        <span class="c1"># total impact for the requested impact category</span>
        <span class="n">impact_score</span> <span class="o">=</span> <span class="p">(</span>
            <span class="o">...</span> <span class="o">*</span> <span class="n">df_copper</span><span class="p">[</span><span class="n">df_copper</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
            <span class="o">...</span> <span class="o">*</span> <span class="n">df_ferrite</span><span class="p">[</span><span class="n">df_ferrite</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
            <span class="o">...</span> <span class="o">*</span> <span class="n">df_electricity</span><span class="p">[</span><span class="n">df_electricity</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="c1"># Normalize the score (not mandatory but may facilitates optimization because objective value is closer to unity)</span>
        <span class="n">normalization_factor</span> <span class="o">=</span> <span class="n">normalization_factors_df</span><span class="p">[</span><span class="n">normalization_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Normalization factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">normalized_score</span> <span class="o">=</span> <span class="n">impact_score</span> <span class="o">/</span> <span class="n">normalization_factor</span>
        <span class="k">return</span> <span class="n">normalized_score</span>
    
    <span class="k">elif</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;Prt&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Optimisation variables:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Airgap e/D = </span><span class="si">%.2g</span><span class="s2">&quot;</span><span class="o">%</span> <span class="p">(</span><span class="n">e_D</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Current density J = </span><span class="si">%.2g</span><span class="s2">&quot;</span><span class="o">%</span> <span class="p">(</span><span class="n">J</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Components characteristics:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Total mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="n">M_total</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Core (2) mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">M_core</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Coil mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="n">M_copper</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Core dimensions = </span><span class="si">%.1f</span><span class="s2"> (diameter) x </span><span class="si">%.1f</span><span class="s2"> (heigth) mm&quot;</span><span class="o">%</span><span class="p">((</span><span class="n">D</span><span class="o">*</span><span class="mf">1e3</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">H</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Airgap e = </span><span class="si">%.1f</span><span class="s2"> mm&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">e_D</span><span class="o">*</span><span class="n">D</span><span class="o">*</span><span class="mf">1e3</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           A_iron = </span><span class="si">%.0f</span><span class="s2"> mm^2&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">A_iron</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Number of turns = </span><span class="si">%i</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Joules losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_PJ</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Friction losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_fr</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Total energy losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_total</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Constraints (should be &gt;0):&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Winding  surface margin = </span><span class="si">%.3f</span><span class="s2"> mm²&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">A_wind</span><span class="o">-</span><span class="n">S_bob</span><span class="p">)</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Induction margin = </span><span class="si">%.3f</span><span class="s2"> T&quot;</span> <span class="o">%</span><span class="p">((</span><span class="n">B_mag</span><span class="o">-</span><span class="n">B</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Temperature margin = </span><span class="si">%.3f</span><span class="s2"> K&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">T_max</span><span class="o">-</span><span class="n">Teta_hot</span><span class="p">))</span>
        
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">A_wind</span><span class="o">-</span><span class="n">S_bob</span><span class="p">,</span> <span class="n">B_mag</span><span class="o">-</span><span class="n">B</span><span class="p">,</span> <span class="n">T_max</span><span class="o">-</span><span class="n">Teta_hot</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>We can now re-run the optimization to size the inductor with respect to different objective functions.</p>
<blockquote>
<div><p><strong>Exercise (Comparison of objective functions)</strong><br>
Run the optimization with the following objective functions:<br>
- Mass minimization<br>
- Energy losses minimization<br>
- Impact score minimization for each environmental category. <br>
Store the sizing results (e.g., core mass and coil mass) in the <code class="docutils literal notranslate"><span class="pre">optimization_dict</span></code> object and plot the results.<br>
Are the results always the same? Provide an explanation based on the LCA study carried out earlier.</p>
</div></blockquote>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimization variables</span>
<span class="n">e_D</span><span class="o">=</span><span class="mf">1e-3</span> <span class="c1"># [m] airgap</span>
<span class="n">J</span><span class="o">=</span><span class="mi">50</span> <span class="c1"># [A/mm²] current density</span>

<span class="c1"># Vector of parameters</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">e_D</span><span class="p">,</span><span class="n">J</span><span class="p">))</span>

<span class="c1"># Optimization with SLSQP algorithm</span>
<span class="n">contrainte</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;Const&#39;</span><span class="p">)</span>
<span class="n">objectif</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">)</span>  <span class="c1"># To modify according to the objective function (e.g., &#39;climate change&#39;)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">fmin_slsqp</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">objectif</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> 
                                   <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">1e-3</span><span class="p">,</span><span class="mf">1e-1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span>
                                   <span class="n">f_ieqcons</span><span class="o">=</span><span class="n">contrainte</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>

<span class="c1"># Final characteristics after optimization </span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final characteristics after optimization :&quot;</span><span class="p">)</span>

<span class="n">SizingInductor</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;Prt&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">TypeError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">8</span><span class="p">],</span> <span class="n">line</span> <span class="mi">11</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">contrainte</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;Const&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="n">objectif</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">)</span>  <span class="c1"># To modify according to the objective function (e.g., &#39;climate change&#39;)</span>
<span class="ne">---&gt; </span><span class="mi">11</span> <span class="n">result</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">fmin_slsqp</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">objectif</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> 
<span class="g g-Whitespace">     </span><span class="mi">12</span>                                    <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">1e-3</span><span class="p">,</span><span class="mf">1e-1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>                                    <span class="n">f_ieqcons</span><span class="o">=</span><span class="n">contrainte</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">15</span> <span class="c1"># Final characteristics after optimization </span>
<span class="g g-Whitespace">     </span><span class="mi">16</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/scipy/optimize/_slsqp_py.py:210,</span> in <span class="ni">fmin_slsqp</span><span class="nt">(func, x0, eqcons, f_eqcons, ieqcons, f_ieqcons, bounds, fprime, fprime_eqcons, fprime_ieqcons, args, iter, acc, iprint, disp, full_output, epsilon, callback)</span>
<span class="g g-Whitespace">    </span><span class="mi">206</span> <span class="k">if</span> <span class="n">f_ieqcons</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">207</span>     <span class="n">cons</span> <span class="o">+=</span> <span class="p">({</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;ineq&#39;</span><span class="p">,</span> <span class="s1">&#39;fun&#39;</span><span class="p">:</span> <span class="n">f_ieqcons</span><span class="p">,</span> <span class="s1">&#39;jac&#39;</span><span class="p">:</span> <span class="n">fprime_ieqcons</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">208</span>               <span class="s1">&#39;args&#39;</span><span class="p">:</span> <span class="n">args</span><span class="p">},</span> <span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">210</span> <span class="n">res</span> <span class="o">=</span> <span class="n">_minimize_slsqp</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="n">x0</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">jac</span><span class="o">=</span><span class="n">fprime</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span>
<span class="g g-Whitespace">    </span><span class="mi">211</span>                       <span class="n">constraints</span><span class="o">=</span><span class="n">cons</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">212</span> <span class="k">if</span> <span class="n">full_output</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">213</span>     <span class="k">return</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;fun&#39;</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;nit&#39;</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;status&#39;</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="s1">&#39;message&#39;</span><span class="p">]</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/scipy/optimize/_slsqp_py.py:338,</span> in <span class="ni">_minimize_slsqp</span><span class="nt">(func, x0, args, jac, bounds, constraints, maxiter, ftol, iprint, disp, eps, callback, finite_diff_rel_step, **unknown_options)</span>
<span class="g g-Whitespace">    </span><span class="mi">334</span> <span class="c1"># Set the parameters that SLSQP will need</span>
<span class="g g-Whitespace">    </span><span class="mi">335</span> <span class="c1"># meq, mieq: number of equality and inequality constraints</span>
<span class="g g-Whitespace">    </span><span class="mi">336</span> <span class="n">meq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="p">[</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;fun&#39;</span><span class="p">](</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;args&#39;</span><span class="p">]))</span>
<span class="g g-Whitespace">    </span><span class="mi">337</span>           <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cons</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]]))</span>
<span class="ne">--&gt; </span><span class="mi">338</span> <span class="n">mieq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="p">[</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;fun&#39;</span><span class="p">](</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;args&#39;</span><span class="p">]))</span>
<span class="g g-Whitespace">    </span><span class="mi">339</span>            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cons</span><span class="p">[</span><span class="s1">&#39;ineq&#39;</span><span class="p">]]))</span>
<span class="g g-Whitespace">    </span><span class="mi">340</span> <span class="c1"># m = The total number of constraints</span>
<span class="g g-Whitespace">    </span><span class="mi">341</span> <span class="n">m</span> <span class="o">=</span> <span class="n">meq</span> <span class="o">+</span> <span class="n">mieq</span>

<span class="nn">File /opt/hostedtoolcache/Python/3.9.25/x64/lib/python3.9/site-packages/scipy/optimize/_slsqp_py.py:338,</span> in <span class="ni">&lt;listcomp&gt;</span><span class="nt">(.0)</span>
<span class="g g-Whitespace">    </span><span class="mi">334</span> <span class="c1"># Set the parameters that SLSQP will need</span>
<span class="g g-Whitespace">    </span><span class="mi">335</span> <span class="c1"># meq, mieq: number of equality and inequality constraints</span>
<span class="g g-Whitespace">    </span><span class="mi">336</span> <span class="n">meq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="p">[</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;fun&#39;</span><span class="p">](</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;args&#39;</span><span class="p">]))</span>
<span class="g g-Whitespace">    </span><span class="mi">337</span>           <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cons</span><span class="p">[</span><span class="s1">&#39;eq&#39;</span><span class="p">]]))</span>
<span class="ne">--&gt; </span><span class="mi">338</span> <span class="n">mieq</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">map</span><span class="p">(</span><span class="nb">len</span><span class="p">,</span> <span class="p">[</span><span class="n">atleast_1d</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;fun&#39;</span><span class="p">](</span><span class="n">x</span><span class="p">,</span> <span class="o">*</span><span class="n">c</span><span class="p">[</span><span class="s1">&#39;args&#39;</span><span class="p">]))</span>
<span class="g g-Whitespace">    </span><span class="mi">339</span>            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cons</span><span class="p">[</span><span class="s1">&#39;ineq&#39;</span><span class="p">]]))</span>
<span class="g g-Whitespace">    </span><span class="mi">340</span> <span class="c1"># m = The total number of constraints</span>
<span class="g g-Whitespace">    </span><span class="mi">341</span> <span class="n">m</span> <span class="o">=</span> <span class="n">meq</span> <span class="o">+</span> <span class="n">mieq</span>

<span class="nn">Cell In[8], line 9,</span> in <span class="ni">&lt;lambda&gt;</span><span class="nt">(x)</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">parameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">e_D</span><span class="p">,</span><span class="n">J</span><span class="p">))</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span> <span class="c1"># Optimization with SLSQP algorithm</span>
<span class="ne">----&gt; </span><span class="mi">9</span> <span class="n">contrainte</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;Const&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">10</span> <span class="n">objectif</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;mass&#39;</span><span class="p">)</span>  <span class="c1"># To modify according to the objective function (e.g., &#39;climate change&#39;)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">result</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">fmin_slsqp</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">objectif</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> 
<span class="g g-Whitespace">     </span><span class="mi">12</span>                                    <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">1e-3</span><span class="p">,</span><span class="mf">1e-1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span>
<span class="g g-Whitespace">     </span><span class="mi">13</span>                                    <span class="n">f_ieqcons</span><span class="o">=</span><span class="n">contrainte</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>

<span class="nn">Cell In[7], line 101,</span> in <span class="ni">SizingInductor</span><span class="nt">(param, arg)</span>
<span class="g g-Whitespace">     </span><span class="mi">99</span> <span class="n">E_PJ</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kWh] Joule losses over the life cycle of the inductor</span>
<span class="g g-Whitespace">    </span><span class="mi">100</span> <span class="n">E_fr</span> <span class="o">=</span> <span class="o">...</span>  <span class="c1"># [kWh] friction losses (at bus level) due to the inductor&#39;s mass</span>
<span class="ne">--&gt; </span><span class="mi">101</span> <span class="n">E_total</span> <span class="o">=</span> <span class="n">E_PJ</span> <span class="o">+</span> <span class="n">E_fr</span>
<span class="g g-Whitespace">    </span><span class="mi">103</span> <span class="c1"># Objective and contraints</span>
<span class="g g-Whitespace">    </span><span class="mi">104</span> <span class="k">if</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;mass&#39;</span><span class="p">:</span>

<span class="ne">TypeError</span>: unsupported operand type(s) for +: &#39;ellipsis&#39; and &#39;ellipsis&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Record the mass corresponding to the inductor obtained with each optimization objective</span>
<span class="n">optimization_dict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;mass&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">2.88</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">]</span>  <span class="c1"># [kg] (core mass, coil mass)</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;energy&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">10.96</span><span class="p">,</span> <span class="mf">2.76</span><span class="p">]</span> <span class="c1"># [kg]</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;acidification&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;climate change&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;ecotoxicity: freshwater&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;energy resources: non-renewable&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;eutrophication: freshwater&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;eutrophication: marine&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;eutrophication: terrestrial&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;human toxicity: carcinogenic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;human toxicity: non-carcinogenic&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;ionising radiation: human health&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;land use&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;material resources: metals/minerals&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;ozone depletion&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;particulate matter formation&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;photochemical oxidant formation: human health&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
<span class="n">optimization_dict</span><span class="p">[</span><span class="s2">&quot;water use&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="o">...</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot the sizing results obtained with each optimization objective</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>

<span class="n">optimization_objectives</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">values</span> <span class="o">=</span> <span class="p">[]</span>             
<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">optimization_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">optimization_objectives</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
    <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">optimization_objectives</span><span class="p">)),</span> <span class="n">values</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;core mass&quot;</span><span class="p">)</span>  <span class="c1"># Core masses</span>
<span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">optimization_objectives</span><span class="p">)),</span> <span class="n">values</span><span class="p">[:,</span><span class="mi">1</span><span class="p">],</span> <span class="n">bottom</span><span class="o">=</span><span class="n">values</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;coil mass&quot;</span><span class="p">)</span>  <span class="c1"># Add coil masses</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">optimization_objectives</span><span class="p">)),</span> <span class="n">optimization_objectives</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Optimization objective&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Inductor Mass [kg]&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Inductor mass obtained with different optimization objectives&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="n">Cell</span> <span class="n">In</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">line</span> <span class="mi">9</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>     <span class="n">optimization_objectives</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>     <span class="n">values</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">9</span> <span class="n">values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="g g-Whitespace">     </span><span class="mi">12</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">optimization_objectives</span><span class="p">)),</span> <span class="n">values</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;core mass&quot;</span><span class="p">)</span>  <span class="c1"># Core masses</span>

<span class="ne">ValueError</span>: setting an array element with a sequence. The requested array has an inhomogeneous shape after 1 dimensions. The detected shape was (18,) + inhomogeneous part.
</pre></div>
</div>
</div>
</div>
<blockquote>
<div><p><strong>Exercise (Design decision)</strong><br>
Propose a strategy to make a decision about which sizing should be used for the inductor. Should we select the inductor with lowest mass? the one that minimizes climate change? …</p>
</div></blockquote>
</section>
<section id="multi-objective-optimization">
<h2><span class="section-number">10.10.6. </span>6. Multi-objective optimization<a class="headerlink" href="#multi-objective-optimization" title="Link to this heading">#</a></h2>
<p>The multi-objective optimization consists in having a single objective function that is expressed as a weighted sum of all the categories of environmental impact. This results in a single environmental score:</p>
<div class="math notranslate nohighlight">
\[ Single~score = \sum_i w_i \cdot {NS}_i\]</div>
<p>where <span class="math notranslate nohighlight">\({NS}_i\)</span> is the normalized score obtained for the i-th impact category (1 = acidification, 2 = climate change, and so on) and <span class="math notranslate nohighlight">\(w_i\)</span> is a weighting factor that represents the (subjective) importance accorded to this category.</p>
<p>Similarly to the normalization factors, the <em>Environmental Footprint method</em> provides a set of <a class="reference external" href="https://publications.jrc.ec.europa.eu/repository/handle/JRC106545">weighting factors</a> for each impact category. Note that process for obtaining these weighting factors is rather subjective, as it suppose to rank very different environmental impacts. It can include criteria such as the reversibility of the impacts, the geographic spread of the impact and its time span.</p>
<p>The weighting factors <span class="math notranslate nohighlight">\(w_i\)</span> proposed by the Environmental Footprint method are provided in an excel document and displayed below:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import weighting factors</span>
<span class="n">weighting_factors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/normalisation_weighting_factors.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;WF SETS&#39;</span><span class="p">)</span>
<span class="n">weighting_factors_df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Impact category</th>
      <th>Weighting factor</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>acidification</td>
      <td>0.0620</td>
    </tr>
    <tr>
      <th>1</th>
      <td>climate change</td>
      <td>0.2106</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ecotoxicity: freshwater</td>
      <td>0.0192</td>
    </tr>
    <tr>
      <th>3</th>
      <td>eutrophication: freshwater</td>
      <td>0.0280</td>
    </tr>
    <tr>
      <th>4</th>
      <td>eutrophication: marine</td>
      <td>0.0296</td>
    </tr>
    <tr>
      <th>5</th>
      <td>eutrophication: terrestrial</td>
      <td>0.0371</td>
    </tr>
    <tr>
      <th>6</th>
      <td>human toxicity: carcinogenic</td>
      <td>0.0213</td>
    </tr>
    <tr>
      <th>7</th>
      <td>human toxicity: non-carcinogenic</td>
      <td>0.0184</td>
    </tr>
    <tr>
      <th>8</th>
      <td>ionising radiation: human health</td>
      <td>0.0501</td>
    </tr>
    <tr>
      <th>9</th>
      <td>land use</td>
      <td>0.0794</td>
    </tr>
    <tr>
      <th>10</th>
      <td>ozone depletion</td>
      <td>0.0631</td>
    </tr>
    <tr>
      <th>11</th>
      <td>particulate matter formation</td>
      <td>0.0896</td>
    </tr>
    <tr>
      <th>12</th>
      <td>photochemical oxidant formation: human health</td>
      <td>0.0478</td>
    </tr>
    <tr>
      <th>13</th>
      <td>energy resources: non-renewable</td>
      <td>0.0832</td>
    </tr>
    <tr>
      <th>14</th>
      <td>material resources: metals/minerals</td>
      <td>0.0755</td>
    </tr>
    <tr>
      <th>15</th>
      <td>water use</td>
      <td>0.0851</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Now, we have to update the sizing code to calculate and return the single environmental score. The modified code is provided:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">scipy.optimize</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span><span class="p">,</span> <span class="n">sqrt</span>
<span class="kn">import</span> <span class="nn">timeit</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="c1"># Specifications</span>
<span class="n">IL_max</span><span class="o">=</span><span class="mi">150</span> <span class="c1"># [A] max current</span>
<span class="n">IL_RMS</span><span class="o">=</span><span class="mi">140</span> <span class="c1"># [A] RMS current</span>
<span class="n">L</span><span class="o">=</span><span class="mf">150e-6</span> <span class="c1"># [H] Inductance</span>
 
<span class="c1"># Assumptions</span>
<span class="c1">#J=5e6 # [A/m²] Current density</span>
<span class="n">B_mag</span><span class="o">=</span><span class="mf">0.4</span> <span class="c1"># [T] Induction</span>
<span class="n">k_bob</span><span class="o">=</span><span class="mf">0.33</span> <span class="c1"># [-] winding coefficient</span>
<span class="n">T_amb</span><span class="o">=</span><span class="mi">60</span> <span class="c1"># [°C] Support temperature</span>
<span class="n">T_max</span><span class="o">=</span><span class="mi">150</span> <span class="c1"># [°C] Max temperature</span>

<span class="c1"># Physical constants</span>
<span class="n">mu_0</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span><span class="mf">3.14e-7</span> <span class="c1"># [SI] permeability</span>

<span class="c1"># Reference parameters for scaling laws (Pot core)</span>
<span class="n">D_ref</span><span class="o">=</span><span class="mf">66.29e-3</span> <span class="c1"># [m] External diameter</span>
<span class="n">H_ref</span><span class="o">=</span><span class="mf">57.3e-3</span><span class="o">/</span><span class="mi">2</span> <span class="c1"># [m] 1 half core height</span>
<span class="n">Airon_ref</span><span class="o">=</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="o">*</span><span class="p">(</span><span class="mf">29.19</span><span class="o">**</span><span class="mi">2</span><span class="o">-</span><span class="mf">6.5</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span><span class="o">*</span><span class="mf">1e-6</span>    <span class="c1"># [m^2] iron surface</span>
<span class="n">Awind_ref</span><span class="o">=</span><span class="mf">43.28</span><span class="o">*</span><span class="p">(</span><span class="mf">54.51</span><span class="o">-</span><span class="mf">28.19</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mf">1e-6</span>    <span class="c1"># [m^2] winding surface</span>
<span class="n">Rmoy_ref</span><span class="o">=</span><span class="p">(</span><span class="mf">54.51</span><span class="o">-</span><span class="mf">28.19</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="mf">1e-3</span> <span class="c1"># [m] Mean radius for winding</span>
<span class="n">M_ref</span><span class="o">=</span><span class="mf">225e-3</span>  <span class="c1"># [kg] 1 half core mass</span>

<span class="c1"># Additional parameters useful for the life cycle assessment</span>
<span class="n">T_use</span> <span class="o">=</span> <span class="mi">5</span><span class="o">*</span><span class="mi">365</span><span class="o">*</span><span class="mi">8</span> <span class="c1"># [hrs] lifetime service</span>
<span class="n">D_use</span> <span class="o">=</span> <span class="mi">300000</span> <span class="c1"># [km] corresponding travel distance</span>
<span class="n">Crr</span> <span class="o">=</span> <span class="mf">0.01</span>  <span class="c1"># [-] rolling resistance coefficient  </span>

<span class="c1"># Database for LCA</span>
<span class="n">database_path</span> <span class="o">=</span> <span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/lca_inductance.xlsx&#39;</span> <span class="c1"># Path to the database</span>
<span class="n">df_copper</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Copper wire (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_ferrite</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Ferrite (1 kg)&#39;</span><span class="p">)</span>
<span class="n">df_electricity</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Electricity France (1 kWh)&#39;</span><span class="p">)</span>
<span class="n">df_plastic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="n">database_path</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Plastic body (1 kg)&#39;</span><span class="p">)</span>
<span class="n">normalization_factors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/normalisation_weighting_factors.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;NF SETS&#39;</span><span class="p">)</span>
<span class="n">weighting_factors_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_excel</span><span class="p">(</span><span class="s1">&#39;https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/data/normalisation_weighting_factors.xlsx&#39;</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;WF SETS&#39;</span><span class="p">)</span>


<span class="c1"># -----------------------</span>
<span class="c1"># sizing code</span>
<span class="c1"># -----------------------</span>
<span class="c1"># inputs: </span>
<span class="c1"># - param: optimisation variables vector </span>
<span class="c1"># - arg: selection of output  </span>
<span class="c1"># output: </span>
<span class="c1"># - objective if arg=&#39;Obj&#39;, problem characteristics if arg=&#39;Prt&#39;, constraints other else</span>

<span class="k">def</span> <span class="nf">SizingInductor</span><span class="p">(</span><span class="n">param</span><span class="p">,</span> <span class="n">arg</span><span class="p">):</span>
    <span class="c1"># Variables</span>
    <span class="n">e_D</span><span class="o">=</span><span class="n">param</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="c1"># [m] air gap / External diameter</span>
    <span class="n">J</span><span class="o">=</span><span class="n">param</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">*</span><span class="mf">1e6</span> <span class="c1"># [A/m²] current density</span>
    
    <span class="c1"># Magnetic pi_0</span>
    <span class="n">PI0_m</span><span class="o">=</span><span class="mf">3.86</span><span class="o">*</span><span class="n">e_D</span><span class="o">**</span><span class="p">(</span><span class="mf">0.344</span><span class="o">-</span><span class="mf">0.226</span><span class="o">*</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">e_D</span><span class="p">)</span><span class="o">-</span><span class="mf">0.0355</span><span class="o">*</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="n">e_D</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
    
    <span class="c1"># Magnetic energy calculation</span>
    <span class="n">E_mag</span><span class="o">=</span><span class="mi">1</span><span class="o">/</span><span class="mi">2</span><span class="o">*</span><span class="n">L</span><span class="o">*</span><span class="n">IL_max</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># [J] Energy</span>
    
    <span class="n">D</span><span class="o">=</span><span class="p">(</span><span class="n">E_mag</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">PI0_m</span><span class="o">*</span><span class="n">D_ref</span><span class="o">**</span><span class="mi">4</span><span class="o">/</span><span class="n">J</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">k_bob</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">Awind_ref</span><span class="o">**</span><span class="mi">2</span><span class="o">/</span><span class="n">mu_0</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mi">5</span><span class="p">)</span> <span class="c1"># External diameter calculation</span>
          
    <span class="c1"># Reluctance and inductance</span>
    <span class="n">RL</span><span class="o">=</span><span class="n">PI0_m</span><span class="o">/</span><span class="n">mu_0</span><span class="o">/</span><span class="n">D</span>  <span class="c1"># [] reluctance</span>
    <span class="n">N</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">L</span><span class="o">*</span><span class="n">RL</span><span class="p">)</span> <span class="c1"># [-] turn number</span>
    
    <span class="c1"># Wire section &amp; winding surface</span>
    <span class="n">S_w</span><span class="o">=</span><span class="n">IL_RMS</span><span class="o">/</span><span class="n">J</span> <span class="c1"># [m²] 1 wire section area</span>
    <span class="n">S_bob</span><span class="o">=</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">/</span><span class="n">k_bob</span> <span class="c1"># [m^2] winding surface</span>
  
    <span class="c1"># Core scaling</span>
    <span class="n">A_iron</span><span class="o">=</span><span class="n">Airon_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># [m^2] iron surface</span>
    <span class="n">A_wind</span><span class="o">=</span><span class="n">Awind_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="c1"># [m^2] winding surface</span>
    <span class="n">H</span><span class="o">=</span><span class="n">H_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># [m] 1 half core height    </span>
    <span class="n">Rmoy</span><span class="o">=</span><span class="n">Rmoy_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c1"># [m] Mean radius for winding</span>
    
    <span class="n">M_core</span> <span class="o">=</span><span class="n">M_ref</span><span class="o">*</span><span class="p">(</span><span class="n">D</span><span class="o">/</span><span class="n">D_ref</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="c1"># [kg] one half core mass</span>

    <span class="c1"># Magnetic field</span>
    <span class="n">B</span><span class="o">=</span><span class="n">N</span><span class="o">*</span><span class="n">IL_max</span><span class="o">/</span><span class="n">RL</span><span class="o">/</span><span class="n">A_iron</span> <span class="c1"># [T]</span>
    
    <span class="c1"># Mass</span>
    <span class="n">M_copper</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">Rmoy</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">*</span><span class="mi">7800</span>
    <span class="n">M_total</span><span class="o">=</span><span class="n">M_copper</span><span class="o">+</span><span class="n">M_core</span><span class="o">*</span><span class="mi">2</span>
    
    <span class="c1"># Temperature calculation</span>
    <span class="n">PI0_t</span> <span class="o">=</span> <span class="mf">0.0786</span> <span class="o">+</span> <span class="mf">0.524</span><span class="o">*</span><span class="n">e_D</span> <span class="o">-</span><span class="mf">2.04</span><span class="o">*</span><span class="n">e_D</span><span class="o">**</span><span class="mi">2</span> <span class="c1"># PI0 thermal</span>
    <span class="n">Rth</span><span class="o">=</span><span class="n">PI0_t</span><span class="o">/</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">D</span><span class="p">)</span> <span class="c1"># [K/W] thermal resistance</span>
    
    <span class="n">PJ</span><span class="o">=</span><span class="n">J</span><span class="o">**</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="o">*</span><span class="n">Rmoy</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="n">S_w</span><span class="o">*</span><span class="mf">1.7e-8</span> <span class="c1"># [W] Joules losses</span>
    
    <span class="n">Teta_hot</span><span class="o">=</span><span class="n">T_amb</span> <span class="o">+</span> <span class="n">PJ</span><span class="o">*</span><span class="n">Rth</span> <span class="c1"># [°C] Hot spot temperature</span>
    
    <span class="c1"># Energy losses</span>
    <span class="n">E_PJ</span> <span class="o">=</span> <span class="n">T_use</span> <span class="o">*</span> <span class="p">(</span><span class="n">PJ</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">)</span>   <span class="c1"># [kWh] Joule losses over the life cycle of the inductor</span>
    <span class="n">E_fr</span> <span class="o">=</span> <span class="n">M_total</span> <span class="o">*</span> <span class="mf">9.81</span> <span class="o">*</span> <span class="n">Crr</span> <span class="o">*</span> <span class="p">(</span><span class="n">D_use</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">)</span> <span class="o">/</span> <span class="mi">1000</span> <span class="o">/</span> <span class="mi">3600</span>  <span class="c1"># [kWh] friction losses (at bus level) due to the inductor&#39;s mass</span>
    <span class="n">E_total</span> <span class="o">=</span> <span class="n">E_PJ</span> <span class="o">+</span> <span class="n">E_fr</span>
    
    <span class="c1"># Objective and contraints</span>
    <span class="k">if</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;mass&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">M_total</span>
    
    <span class="k">elif</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;energy&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">E_total</span> <span class="o">/</span> <span class="mi">100</span>  <span class="c1"># factor 100 to facilitate optimization convergence (result closer to unity)</span>
    
    <span class="k">elif</span> <span class="n">arg</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;acidification&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;climate change&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ecotoxicity: freshwater&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;energy resources: non-renewable&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: freshwater&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: marine&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;eutrophication: terrestrial&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;human toxicity: carcinogenic&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;human toxicity: non-carcinogenic&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ionising radiation: human health&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;land use&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;material resources: metals/minerals&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;ozone depletion&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;particulate matter formation&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;photochemical oxidant formation: human health&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;water use&quot;</span>
                <span class="p">]:</span>
        <span class="c1"># total impact for the requested impact category</span>
        <span class="n">impact_score</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">M_copper</span> <span class="o">*</span> <span class="n">df_copper</span><span class="p">[</span><span class="n">df_copper</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
            <span class="mi">2</span><span class="o">*</span><span class="n">M_core</span> <span class="o">*</span> <span class="n">df_ferrite</span><span class="p">[</span><span class="n">df_ferrite</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
            <span class="n">E_total</span> <span class="o">*</span> <span class="n">df_electricity</span><span class="p">[</span><span class="n">df_electricity</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="c1"># Normalize the score (not mandatory but may facilitates optimization because objective value is closer to unity)</span>
        <span class="n">normalization_factor</span> <span class="o">=</span> <span class="n">normalization_factors_df</span><span class="p">[</span><span class="n">normalization_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">arg</span><span class="p">][</span><span class="s2">&quot;Normalization factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">normalized_score</span> <span class="o">=</span> <span class="n">impact_score</span> <span class="o">/</span> <span class="n">normalization_factor</span>
        <span class="k">return</span> <span class="n">normalized_score</span>
    
    <span class="k">elif</span> <span class="n">arg</span> <span class="o">==</span> <span class="s1">&#39;ecodesign&#39;</span><span class="p">:</span>  <span class="c1"># multi-objective environmental objective</span>
        <span class="n">single_score</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># Calculate the impact for the each impact category</span>
        <span class="k">for</span> <span class="n">impact_category</span> <span class="ow">in</span> <span class="n">weighting_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">:</span>
            <span class="n">impact_score</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">M_copper</span> <span class="o">*</span> <span class="n">df_copper</span><span class="p">[</span><span class="n">df_copper</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
                <span class="mi">2</span><span class="o">*</span><span class="n">M_core</span> <span class="o">*</span> <span class="n">df_ferrite</span><span class="p">[</span><span class="n">df_ferrite</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
                <span class="n">E_total</span> <span class="o">*</span> <span class="n">df_electricity</span><span class="p">[</span><span class="n">df_electricity</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span>
            <span class="p">)</span>
            <span class="c1"># Normalize then weight the score</span>
            <span class="n">normalization_factor</span> <span class="o">=</span> <span class="n">normalization_factors_df</span><span class="p">[</span><span class="n">normalization_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Normalization factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">normalized_score</span> <span class="o">=</span> <span class="n">impact_score</span> <span class="o">/</span> <span class="n">normalization_factor</span>
            <span class="n">weighting_factor</span> <span class="o">=</span> <span class="n">weighting_factors_df</span><span class="p">[</span><span class="n">weighting_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Weighting factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">weighted_score</span> <span class="o">=</span> <span class="n">normalized_score</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">weighting_factor</span>
            <span class="c1"># Add to the single environmental score</span>
            <span class="n">single_score</span> <span class="o">+=</span> <span class="n">weighted_score</span>
        <span class="k">return</span> <span class="n">single_score</span>
    
    <span class="k">elif</span> <span class="n">arg</span><span class="o">==</span><span class="s1">&#39;Prt&#39;</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Optimisation variables:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Airgap e/D = </span><span class="si">%.2g</span><span class="s2">&quot;</span><span class="o">%</span> <span class="p">(</span><span class="n">e_D</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Current density J = </span><span class="si">%.2g</span><span class="s2">&quot;</span><span class="o">%</span> <span class="p">(</span><span class="n">J</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Components characteristics:&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Total mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="n">M_total</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Core (2) mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">M_core</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Coil mass = </span><span class="si">%.2f</span><span class="s2"> kg&quot;</span> <span class="o">%</span> <span class="n">M_copper</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Core dimensions = </span><span class="si">%.1f</span><span class="s2"> (diameter) x </span><span class="si">%.1f</span><span class="s2"> (heigth) mm&quot;</span><span class="o">%</span><span class="p">((</span><span class="n">D</span><span class="o">*</span><span class="mf">1e3</span><span class="p">,</span><span class="mi">2</span><span class="o">*</span><span class="n">H</span><span class="o">*</span><span class="mf">1e3</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Airgap e = </span><span class="si">%.1f</span><span class="s2"> mm&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">e_D</span><span class="o">*</span><span class="n">D</span><span class="o">*</span><span class="mf">1e3</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           A_iron = </span><span class="si">%.0f</span><span class="s2"> mm^2&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">A_iron</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Number of turns = </span><span class="si">%i</span><span class="s2">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">N</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Joules losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_PJ</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Friction losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_fr</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Total energy losses = </span><span class="si">%.3f</span><span class="s2"> kWh&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">E_total</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;* Constraints (should be &gt;0):&quot;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Winding  surface margin = </span><span class="si">%.3f</span><span class="s2"> mm²&quot;</span> <span class="o">%</span> <span class="p">((</span><span class="n">A_wind</span><span class="o">-</span><span class="n">S_bob</span><span class="p">)</span><span class="o">*</span><span class="mf">1e6</span><span class="p">))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Induction margin = </span><span class="si">%.3f</span><span class="s2"> T&quot;</span> <span class="o">%</span><span class="p">((</span><span class="n">B_mag</span><span class="o">-</span><span class="n">B</span><span class="p">)))</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;           Temperature margin = </span><span class="si">%.3f</span><span class="s2"> K&quot;</span> <span class="o">%</span><span class="p">(</span><span class="n">T_max</span><span class="o">-</span><span class="n">Teta_hot</span><span class="p">))</span>
        
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="p">[</span><span class="n">A_wind</span><span class="o">-</span><span class="n">S_bob</span><span class="p">,</span> <span class="n">B_mag</span><span class="o">-</span><span class="n">B</span><span class="p">,</span> <span class="n">T_max</span><span class="o">-</span><span class="n">Teta_hot</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<section id="results-for-the-eco-design">
<h3><span class="section-number">10.10.6.1. </span>Results for the eco-design<a class="headerlink" href="#results-for-the-eco-design" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Optimization variables</span>
<span class="n">e_D</span><span class="o">=</span><span class="mf">1e-3</span> <span class="c1"># [m] airgap</span>
<span class="n">J</span><span class="o">=</span><span class="mi">50</span> <span class="c1"># [A/mm²] current density</span>

<span class="c1"># Vector of parameters</span>
<span class="n">parameters</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">((</span><span class="n">e_D</span><span class="p">,</span><span class="n">J</span><span class="p">))</span>

<span class="c1"># Optimization with SLSQP algorithm</span>
<span class="n">contrainte</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;Const&#39;</span><span class="p">)</span>
<span class="n">objectif</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">SizingInductor</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">&#39;ecodesign&#39;</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">optimize</span><span class="o">.</span><span class="n">fmin_slsqp</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">objectif</span><span class="p">,</span> <span class="n">x0</span><span class="o">=</span><span class="n">parameters</span><span class="p">,</span> 
                                   <span class="n">bounds</span><span class="o">=</span><span class="p">[(</span><span class="mf">1e-3</span><span class="p">,</span><span class="mf">1e-1</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">50</span><span class="p">)],</span>
                                   <span class="n">f_ieqcons</span><span class="o">=</span><span class="n">contrainte</span><span class="p">,</span> <span class="nb">iter</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">acc</span><span class="o">=</span><span class="mf">1e-6</span><span class="p">)</span>

<span class="c1"># Final characteristics after optimization </span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Final characteristics after optimization :&quot;</span><span class="p">)</span>

<span class="n">SizingInductor</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="s1">&#39;Prt&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;-----------------------------------------------&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Optimization terminated successfully    (Exit mode 0)
            Current function value: 0.026892673532935087
            Iterations: 16
            Function evaluations: 48
            Gradient evaluations: 16
-----------------------------------------------
Final characteristics after optimization :
* Optimisation variables:
           Airgap e/D = 0.027
           Current density J = 3.2e+06
* Components characteristics:
           Total mass = 5.77 kg
           Core (2) mass = 4.61 kg
           Coil mass = 1.16 kg
           Core dimensions = 144.0 (diameter) x 124.5 (heigth) mm
           Airgap e = 3.9 mm
           A_iron = 3002 mm^2
           Number of turns = 18
           Joules losses = 370.619 kWh
           Friction losses = 47.203 kWh
           Total energy losses = 417.823 kWh
* Constraints (should be &gt;0):
           Winding  surface margin = 179.210 mm²
           Induction margin = -0.000 T
           Temperature margin = 57.840 K
-----------------------------------------------
</pre></div>
</div>
</div>
</div>
</section>
<section id="comparison-of-the-environmental-impacts-between-the-light-inductor-and-the-eco-designed-one">
<h3><span class="section-number">10.10.6.2. </span>Comparison of the environmental impacts between the “light” inductor and the “eco-designed” one.<a class="headerlink" href="#comparison-of-the-environmental-impacts-between-the-light-inductor-and-the-eco-designed-one" title="Link to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">impact_score</span><span class="p">(</span><span class="n">impact_category</span><span class="p">,</span> <span class="n">M_core</span><span class="p">,</span> <span class="n">M_copper</span><span class="p">,</span> <span class="n">E_total</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculate the LCA score of the inductor for a given impact category.</span>

<span class="sd">    Parameters:</span>
<span class="sd">    - impact_category: str, the impact category for which to calculate the total impact score.</span>
<span class="sd">    - M_copper: float, the mass of copper in the inductor (kg)</span>
<span class="sd">    - M_core: float, the mass of ferrite in the inductor (kg)</span>
<span class="sd">    - E_total: float, the total energy losses (kWh)</span>

<span class="sd">    Returns:</span>
<span class="sd">    - normalized_score: float, the normalized impact score for the given impact category.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="c1"># impact for the requested impact category</span>
    <span class="n">impact_score</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">M_copper</span> <span class="o">*</span> <span class="n">df_copper</span><span class="p">[</span><span class="n">df_copper</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
        <span class="mi">2</span><span class="o">*</span><span class="n">M_core</span> <span class="o">*</span> <span class="n">df_ferrite</span><span class="p">[</span><span class="n">df_ferrite</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span> <span class="o">+</span>
        <span class="n">E_total</span> <span class="o">*</span> <span class="n">df_electricity</span><span class="p">[</span><span class="n">df_electricity</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Impact Score&quot;</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="c1"># Normalize then weight the score</span>
    <span class="n">normalization_factor</span> <span class="o">=</span> <span class="n">normalization_factors_df</span><span class="p">[</span><span class="n">normalization_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Normalization factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">normalized_score</span> <span class="o">=</span> <span class="n">impact_score</span> <span class="o">/</span> <span class="n">normalization_factor</span>
    <span class="n">weighting_factor</span> <span class="o">=</span> <span class="n">weighting_factors_df</span><span class="p">[</span><span class="n">weighting_factors_df</span><span class="p">[</span><span class="s2">&quot;Impact category&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">impact_category</span><span class="p">][</span><span class="s2">&quot;Weighting factor&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">weighted_score</span> <span class="o">=</span> <span class="n">normalized_score</span><span class="o">.</span><span class="n">values</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">weighting_factor</span>
    
    <span class="k">return</span> <span class="n">weighted_score</span>

    
<span class="c1"># List of impact categories</span>
<span class="n">impact_categories</span> <span class="o">=</span> <span class="n">result_df</span><span class="p">[</span><span class="s1">&#39;Impact category&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>

<span class="c1"># Impacts for the inductor with lowest mass</span>
<span class="n">impacts_mass_obj</span> <span class="o">=</span> <span class="p">{</span><span class="n">category</span><span class="p">:</span> <span class="n">impact_score</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="mf">2.88</span><span class="p">,</span> <span class="mf">0.72</span><span class="p">,</span> <span class="mf">841.951</span><span class="p">)</span> <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">impact_categories</span><span class="p">}</span>

<span class="c1"># Impacts for the inductor with lowest single environmental score</span>
<span class="n">impacts_eco_obj</span> <span class="o">=</span> <span class="p">{</span><span class="n">category</span><span class="p">:</span> <span class="n">impact_score</span><span class="p">(</span><span class="n">category</span><span class="p">,</span> <span class="mf">4.61</span><span class="p">,</span> <span class="mf">1.16</span><span class="p">,</span> <span class="mf">417.823</span><span class="p">)</span> <span class="k">for</span> <span class="n">category</span> <span class="ow">in</span> <span class="n">impact_categories</span><span class="p">}</span>

<span class="c1"># Bar plot comparing the results</span>
<span class="n">bar_width</span> <span class="o">=</span> <span class="mf">0.35</span>
<span class="n">index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">impact_categories</span><span class="p">))</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">bar1</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">impacts_mass_obj</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mass objective&#39;</span><span class="p">)</span>
<span class="n">bar2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">impacts_eco_obj</span><span class="o">.</span><span class="n">values</span><span class="p">(),</span> <span class="n">bar_width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Environmental objective&#39;</span><span class="p">)</span>

<span class="c1"># Add labels, title, and legend</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Impact Category&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Normalized and Weighted Impact Scores&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Impact Scores obtained with the mass objective and the environmental objective&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">bar_width</span> <span class="o">/</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">impact_categories</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="s1">&#39;vertical&#39;</span><span class="p">)</span>

<span class="c1"># Show the plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/1bbe94e5c202ed4ce845271260c425cebfc578d24cd6ea54459a835a2ad9061a.png" src="../../_images/1bbe94e5c202ed4ce845271260c425cebfc578d24cd6ea54459a835a2ad9061a.png" />
</div>
</div>
</section>
</section>
<section id="appendix">
<h2><span class="section-number">10.10.7. </span>Appendix<a class="headerlink" href="#appendix" title="Link to this heading">#</a></h2>
<p><img alt="LCA steps" src="https://raw.githubusercontent.com/SizingLab/sizing_course/main/laboratories/Lab-watt_project/assets/images/lca_steps.JPG" /></p>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./laboratories/Lab-watt_project"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="09_SizingCodeDCDCconverter.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">10.9. </span>Sizing code of a DC/DC converter</p>
      </div>
    </a>
    <a class="right-next"
       href="10_LCA_Inductor.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">10.11. </span>Life Cycle Assessment of an inductor</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#scope-definition-of-the-lca">10.10.1. 1. Scope definition of the LCA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#data-for-the-lca">10.10.2. 2. Data for the LCA</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lca-of-the-sized-inductor">10.10.3. 3. LCA of the sized inductor</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#impacts-calculation">10.10.3.1. Impacts calculation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visualization-and-interpretation">10.10.3.2. Visualization and interpretation</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sensitivity-analysis">10.10.4. 4. Sensitivity analysis</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#sizing-optimization-with-various-environmental-objectives">10.10.5. 5. Sizing optimization with various environmental objectives</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#multi-objective-optimization">10.10.6. 6. Multi-objective optimization</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#results-for-the-eco-design">10.10.6.1. Results for the eco-design</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#comparison-of-the-environmental-impacts-between-the-light-inductor-and-the-eco-designed-one">10.10.6.2. Comparison of the environmental impacts between the “light” inductor and the “eco-designed” one.</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#appendix">10.10.7. Appendix</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Marc Budinger, Scott Delbecq, Félix Pollet, Aurélien Reysset
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../../_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="../../_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>